<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8.1 Root directory module | MLOps Engineering</title>
  <meta name="description" content="Implementing an MLOps infrastructure with Airflow and MLFlow utilizing K8s, Terraform, and GithubActions." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="8.1 Root directory module | MLOps Engineering" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Implementing an MLOps infrastructure with Airflow and MLFlow utilizing K8s, Terraform, and GithubActions." />
  <meta name="github-repo" content="seblum/mlops-engineering-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8.1 Root directory module | MLOps Engineering" />
  
  <meta name="twitter:description" content="Implementing an MLOps infrastructure with Airflow and MLFlow utilizing K8s, Terraform, and GithubActions." />
  

<meta name="author" content="Sebastian Blum" />


<meta name="date" content="2023-08-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ml-platform-deployment.html"/>
<link rel="next" href="infrastructure-1.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MLOps Engineering</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html"><i class="fa fa-check"></i>Preamble</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="machine-learning-workflow.html"><a href="machine-learning-workflow.html"><i class="fa fa-check"></i><b>1.1</b> Machine Learning Workflow</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="machine-learning-workflow.html"><a href="machine-learning-workflow.html#ml-worflow-tools"><i class="fa fa-check"></i><b>1.1.1</b> ML Worflow Tools</a></li>
<li class="chapter" data-level="1.1.2" data-path="machine-learning-workflow.html"><a href="machine-learning-workflow.html#developing-machine-learning-models"><i class="fa fa-check"></i><b>1.1.2</b> Developing Machine Learning Models</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="machine-learning-operations-mlops.html"><a href="machine-learning-operations-mlops.html"><i class="fa fa-check"></i><b>1.2</b> Machine Learning Operations (MLOps)</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="machine-learning-operations-mlops.html"><a href="machine-learning-operations-mlops.html#ml-dev-ops"><i class="fa fa-check"></i><b>1.2.1</b> ML + (Dev)-Ops</a></li>
<li class="chapter" data-level="1.2.2" data-path="machine-learning-operations-mlops.html"><a href="machine-learning-operations-mlops.html#mlops-lifecycle"><i class="fa fa-check"></i><b>1.2.2</b> MLOps Lifecycle</a></li>
<li class="chapter" data-level="1.2.3" data-path="machine-learning-operations-mlops.html"><a href="machine-learning-operations-mlops.html#mlops-engineering"><i class="fa fa-check"></i><b>1.2.3</b> MLOps Engineering</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html"><i class="fa fa-check"></i><b>1.3</b> Roles and Tasks in MLOps</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#data-engineer"><i class="fa fa-check"></i><b>1.3.1</b> Data Engineer</a></li>
<li class="chapter" data-level="1.3.2" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#data-scientist"><i class="fa fa-check"></i><b>1.3.2</b> Data Scientist</a></li>
<li class="chapter" data-level="1.3.3" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#ml-engineer"><i class="fa fa-check"></i><b>1.3.3</b> ML Engineer</a></li>
<li class="chapter" data-level="1.3.4" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#mlops-engineer"><i class="fa fa-check"></i><b>1.3.4</b> MLOps Engineer</a></li>
<li class="chapter" data-level="1.3.5" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#devops-engineer"><i class="fa fa-check"></i><b>1.3.5</b> DevOps Engineer</a></li>
<li class="chapter" data-level="1.3.6" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#additional-roles-function"><i class="fa fa-check"></i><b>1.3.6</b> Additional roles &amp; function</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="ops-tools-principles.html"><a href="ops-tools-principles.html"><i class="fa fa-check"></i><b>1.4</b> Ops Tools &amp; Principles</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="ops-tools-principles.html"><a href="ops-tools-principles.html#containerization"><i class="fa fa-check"></i><b>1.4.1</b> Containerization</a></li>
<li class="chapter" data-level="1.4.2" data-path="ops-tools-principles.html"><a href="ops-tools-principles.html#version-control"><i class="fa fa-check"></i><b>1.4.2</b> Version Control</a></li>
<li class="chapter" data-level="1.4.3" data-path="ops-tools-principles.html"><a href="ops-tools-principles.html#cicd"><i class="fa fa-check"></i><b>1.4.3</b> CI/CD</a></li>
<li class="chapter" data-level="1.4.4" data-path="ops-tools-principles.html"><a href="ops-tools-principles.html#infrastructure-as-code"><i class="fa fa-check"></i><b>1.4.4</b> Infrastructure as code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="overview-about-book-tutorials.html"><a href="overview-about-book-tutorials.html"><i class="fa fa-check"></i><b>2</b> Overview about book tutorials</a></li>
<li class="chapter" data-level="3" data-path="airflow.html"><a href="airflow.html"><i class="fa fa-check"></i><b>3</b> Airflow</a>
<ul>
<li class="chapter" data-level="3.1" data-path="core-components.html"><a href="core-components.html"><i class="fa fa-check"></i><b>3.1</b> Core Components</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="core-components.html"><a href="core-components.html#dags"><i class="fa fa-check"></i><b>3.1.1</b> DAGs</a></li>
<li class="chapter" data-level="3.1.2" data-path="core-components.html"><a href="core-components.html#operators"><i class="fa fa-check"></i><b>3.1.2</b> Operators</a></li>
<li class="chapter" data-level="3.1.3" data-path="core-components.html"><a href="core-components.html#tasks"><i class="fa fa-check"></i><b>3.1.3</b> Tasks</a></li>
<li class="chapter" data-level="3.1.4" data-path="core-components.html"><a href="core-components.html#xcom"><i class="fa fa-check"></i><b>3.1.4</b> XCom</a></li>
<li class="chapter" data-level="3.1.5" data-path="core-components.html"><a href="core-components.html#scheduling"><i class="fa fa-check"></i><b>3.1.5</b> Scheduling</a></li>
<li class="chapter" data-level="3.1.6" data-path="core-components.html"><a href="core-components.html#taskflow"><i class="fa fa-check"></i><b>3.1.6</b> Taskflow</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="exemplary-ml-workflow.html"><a href="exemplary-ml-workflow.html"><i class="fa fa-check"></i><b>3.2</b> Exemplary ML workflow</a></li>
<li class="chapter" data-level="3.3" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html"><i class="fa fa-check"></i><b>3.3</b> Airflow infrastructure</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#airflow-as-a-distributed-system"><i class="fa fa-check"></i><b>3.3.1</b> Airflow as a distributed system</a></li>
<li class="chapter" data-level="3.3.2" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#scheduler"><i class="fa fa-check"></i><b>3.3.2</b> Scheduler</a></li>
<li class="chapter" data-level="3.3.3" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#webserver"><i class="fa fa-check"></i><b>3.3.3</b> Webserver</a></li>
<li class="chapter" data-level="3.3.4" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#executor"><i class="fa fa-check"></i><b>3.3.4</b> Executor</a></li>
<li class="chapter" data-level="3.3.5" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#dag-directory"><i class="fa fa-check"></i><b>3.3.5</b> DAG Directory</a></li>
<li class="chapter" data-level="3.3.6" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#metadata-database"><i class="fa fa-check"></i><b>3.3.6</b> Metadata Database</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mlflow.html"><a href="mlflow.html"><i class="fa fa-check"></i><b>4</b> MLflow</a>
<ul>
<li class="chapter" data-level="4.1" data-path="core-components-1.html"><a href="core-components-1.html"><i class="fa fa-check"></i><b>4.1</b> Core Components</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="core-components-1.html"><a href="core-components-1.html#mlflow-tracking"><i class="fa fa-check"></i><b>4.1.1</b> MLflow Tracking</a></li>
<li class="chapter" data-level="4.1.2" data-path="core-components-1.html"><a href="core-components-1.html#mlflow-models"><i class="fa fa-check"></i><b>4.1.2</b> MLflow Models</a></li>
<li class="chapter" data-level="4.1.3" data-path="core-components-1.html"><a href="core-components-1.html#mlflow-model-registry"><i class="fa fa-check"></i><b>4.1.3</b> MLflow Model Registry</a></li>
<li class="chapter" data-level="4.1.4" data-path="core-components-1.html"><a href="core-components-1.html#mlflow-projects"><i class="fa fa-check"></i><b>4.1.4</b> MLflow Projects</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="mlfflow-architecture.html"><a href="mlfflow-architecture.html"><i class="fa fa-check"></i><b>4.2</b> MLFflow Architecture</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="mlfflow-architecture.html"><a href="mlfflow-architecture.html#mlflow-tracking-server"><i class="fa fa-check"></i><b>4.2.1</b> MLflow Tracking Server</a></li>
<li class="chapter" data-level="4.2.2" data-path="mlfflow-architecture.html"><a href="mlfflow-architecture.html#mlflow-backend-store"><i class="fa fa-check"></i><b>4.2.2</b> MLflow Backend Store</a></li>
<li class="chapter" data-level="4.2.3" data-path="mlfflow-architecture.html"><a href="mlfflow-architecture.html#mlflow-artifact-store"><i class="fa fa-check"></i><b>4.2.3</b> MLflow Artifact Store</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="kubernetes.html"><a href="kubernetes.html"><i class="fa fa-check"></i><b>5</b> Kubernetes</a>
<ul>
<li class="chapter" data-level="5.1" data-path="core-components-2.html"><a href="core-components-2.html"><i class="fa fa-check"></i><b>5.1</b> Core Components</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="core-components-2.html"><a href="core-components-2.html#nodes"><i class="fa fa-check"></i><b>5.1.1</b> Nodes</a></li>
<li class="chapter" data-level="5.1.2" data-path="core-components-2.html"><a href="core-components-2.html#pods"><i class="fa fa-check"></i><b>5.1.2</b> Pods</a></li>
<li class="chapter" data-level="5.1.3" data-path="core-components-2.html"><a href="core-components-2.html#imperative-declarative-management"><i class="fa fa-check"></i><b>5.1.3</b> Imperative &amp; Declarative Management</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="application-deployment-design.html"><a href="application-deployment-design.html"><i class="fa fa-check"></i><b>5.2</b> Application Deployment &amp; Design</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="application-deployment-design.html"><a href="application-deployment-design.html#deployments"><i class="fa fa-check"></i><b>5.2.1</b> Deployments</a></li>
<li class="chapter" data-level="5.2.2" data-path="application-deployment-design.html"><a href="application-deployment-design.html#resource-management"><i class="fa fa-check"></i><b>5.2.2</b> Resource Management</a></li>
<li class="chapter" data-level="5.2.3" data-path="application-deployment-design.html"><a href="application-deployment-design.html#daemonsets"><i class="fa fa-check"></i><b>5.2.3</b> DaemonSets</a></li>
<li class="chapter" data-level="5.2.4" data-path="application-deployment-design.html"><a href="application-deployment-design.html#statefulsets"><i class="fa fa-check"></i><b>5.2.4</b> StatefulSets</a></li>
<li class="chapter" data-level="5.2.5" data-path="application-deployment-design.html"><a href="application-deployment-design.html#jobs-cron-jobs"><i class="fa fa-check"></i><b>5.2.5</b> Jobs &amp; Cron Jobs</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="services-networking.html"><a href="services-networking.html"><i class="fa fa-check"></i><b>5.3</b> Services &amp; Networking</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="services-networking.html"><a href="services-networking.html#services"><i class="fa fa-check"></i><b>5.3.1</b> Services</a></li>
<li class="chapter" data-level="5.3.2" data-path="services-networking.html"><a href="services-networking.html#service-discovery"><i class="fa fa-check"></i><b>5.3.2</b> Service Discovery</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="volume-storage.html"><a href="volume-storage.html"><i class="fa fa-check"></i><b>5.4</b> Volume &amp; Storage</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="volume-storage.html"><a href="volume-storage.html#emptydir-volume"><i class="fa fa-check"></i><b>5.4.1</b> EmptyDir Volume</a></li>
<li class="chapter" data-level="5.4.2" data-path="volume-storage.html"><a href="volume-storage.html#hostpath-volume"><i class="fa fa-check"></i><b>5.4.2</b> HostPath Volume</a></li>
<li class="chapter" data-level="5.4.3" data-path="volume-storage.html"><a href="volume-storage.html#persistent-volumes"><i class="fa fa-check"></i><b>5.4.3</b> Persistent Volumes</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html"><i class="fa fa-check"></i><b>5.5</b> Environment, Configuration &amp; Security</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html#namespaces"><i class="fa fa-check"></i><b>5.5.1</b> Namespaces</a></li>
<li class="chapter" data-level="5.5.2" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html#labels-selectors-and-annotations"><i class="fa fa-check"></i><b>5.5.2</b> Labels, Selectors and Annotations</a></li>
<li class="chapter" data-level="5.5.3" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html#configmaps"><i class="fa fa-check"></i><b>5.5.3</b> ConfigMaps</a></li>
<li class="chapter" data-level="5.5.4" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html#secrets"><i class="fa fa-check"></i><b>5.5.4</b> Secrets</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="observability-maintenance.html"><a href="observability-maintenance.html"><i class="fa fa-check"></i><b>5.6</b> Observability &amp; Maintenance</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="observability-maintenance.html"><a href="observability-maintenance.html#health-checks"><i class="fa fa-check"></i><b>5.6.1</b> Health Checks</a></li>
<li class="chapter" data-level="5.6.2" data-path="observability-maintenance.html"><a href="observability-maintenance.html#debugging"><i class="fa fa-check"></i><b>5.6.2</b> Debugging</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="helm.html"><a href="helm.html"><i class="fa fa-check"></i><b>5.7</b> Helm</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="helm.html"><a href="helm.html#helm-chart-structure"><i class="fa fa-check"></i><b>5.7.1</b> Helm Chart Structure</a></li>
<li class="chapter" data-level="5.7.2" data-path="helm.html"><a href="helm.html#working-with-helm"><i class="fa fa-check"></i><b>5.7.2</b> Working with Helm</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="terraform.html"><a href="terraform.html"><i class="fa fa-check"></i><b>6</b> Terraform</a>
<ul>
<li class="chapter" data-level="6.1" data-path="basic-usage.html"><a href="basic-usage.html"><i class="fa fa-check"></i><b>6.1</b> Basic usage</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="basic-usage.html"><a href="basic-usage.html#terraform-init"><i class="fa fa-check"></i><b>6.1.1</b> terraform init</a></li>
<li class="chapter" data-level="6.1.2" data-path="basic-usage.html"><a href="basic-usage.html#terraform-validate"><i class="fa fa-check"></i><b>6.1.2</b> terraform validate</a></li>
<li class="chapter" data-level="6.1.3" data-path="basic-usage.html"><a href="basic-usage.html#terraform-plan"><i class="fa fa-check"></i><b>6.1.3</b> terraform plan</a></li>
<li class="chapter" data-level="6.1.4" data-path="basic-usage.html"><a href="basic-usage.html#terraform-apply"><i class="fa fa-check"></i><b>6.1.4</b> terraform apply</a></li>
<li class="chapter" data-level="6.1.5" data-path="basic-usage.html"><a href="basic-usage.html#terraform-destroy"><i class="fa fa-check"></i><b>6.1.5</b> terraform destroy</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="core-components-3.html"><a href="core-components-3.html"><i class="fa fa-check"></i><b>6.2</b> Core Components</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="core-components-3.html"><a href="core-components-3.html#providers"><i class="fa fa-check"></i><b>6.2.1</b> Providers</a></li>
<li class="chapter" data-level="6.2.2" data-path="core-components-3.html"><a href="core-components-3.html#resources"><i class="fa fa-check"></i><b>6.2.2</b> Resources</a></li>
<li class="chapter" data-level="6.2.3" data-path="core-components-3.html"><a href="core-components-3.html#data-sources"><i class="fa fa-check"></i><b>6.2.3</b> Data Sources</a></li>
<li class="chapter" data-level="6.2.4" data-path="core-components-3.html"><a href="core-components-3.html#state"><i class="fa fa-check"></i><b>6.2.4</b> State</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="modules.html"><a href="modules.html"><i class="fa fa-check"></i><b>6.3</b> Modules</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="modules.html"><a href="modules.html#input-variables"><i class="fa fa-check"></i><b>6.3.1</b> Input Variables</a></li>
<li class="chapter" data-level="6.3.2" data-path="modules.html"><a href="modules.html#output-variables"><i class="fa fa-check"></i><b>6.3.2</b> Output Variables</a></li>
<li class="chapter" data-level="6.3.3" data-path="modules.html"><a href="modules.html#local-variables"><i class="fa fa-check"></i><b>6.3.3</b> Local Variables</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html"><i class="fa fa-check"></i><b>6.4</b> Additional tips &amp; tricks</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html#count"><i class="fa fa-check"></i><b>6.4.1</b> count</a></li>
<li class="chapter" data-level="6.4.2" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html#for-each"><i class="fa fa-check"></i><b>6.4.2</b> for-each</a></li>
<li class="chapter" data-level="6.4.3" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html#for"><i class="fa fa-check"></i><b>6.4.3</b> for</a></li>
<li class="chapter" data-level="6.4.4" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html#workspaces"><i class="fa fa-check"></i><b>6.4.4</b> Workspaces</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="exemplary-deployment.html"><a href="exemplary-deployment.html"><i class="fa fa-check"></i><b>6.5</b> Exemplary Deployment</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ml-platform-design.html"><a href="ml-platform-design.html"><i class="fa fa-check"></i><b>7</b> ML Platform Design</a></li>
<li class="chapter" data-level="8" data-path="ml-platform-deployment.html"><a href="ml-platform-deployment.html"><i class="fa fa-check"></i><b>8</b> ML Platform Deployment</a>
<ul>
<li class="chapter" data-level="8.1" data-path="root-directory-module.html"><a href="root-directory-module.html"><i class="fa fa-check"></i><b>8.1</b> Root directory module</a></li>
<li class="chapter" data-level="8.2" data-path="infrastructure-1.html"><a href="infrastructure-1.html"><i class="fa fa-check"></i><b>8.2</b> Infrastructure</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="infrastructure-1.html"><a href="infrastructure-1.html#virtual-private-cloud"><i class="fa fa-check"></i><b>8.2.1</b> Virtual Private Cloud</a></li>
<li class="chapter" data-level="8.2.2" data-path="infrastructure-1.html"><a href="infrastructure-1.html#elastic-kubernetes-service"><i class="fa fa-check"></i><b>8.2.2</b> Elastic Kubernetes Service</a></li>
<li class="chapter" data-level="8.2.3" data-path="infrastructure-1.html"><a href="infrastructure-1.html#networking"><i class="fa fa-check"></i><b>8.2.3</b> Networking</a></li>
<li class="chapter" data-level="8.2.4" data-path="infrastructure-1.html"><a href="infrastructure-1.html#relational-database-service"><i class="fa fa-check"></i><b>8.2.4</b> Relational Database Service</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="modules-2.html"><a href="modules-2.html"><i class="fa fa-check"></i><b>8.3</b> Modules</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="modules-2.html"><a href="modules-2.html#airflow-1"><i class="fa fa-check"></i><b>8.3.1</b> Airflow</a></li>
<li class="chapter" data-level="8.3.2" data-path="modules-2.html"><a href="modules-2.html#jupyterhub"><i class="fa fa-check"></i><b>8.3.2</b> Jupyterhub</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="design-decisions.html"><a href="design-decisions.html"><i class="fa fa-check"></i><b>8.4</b> Design Decisions</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="use-case-development.html"><a href="use-case-development.html"><i class="fa fa-check"></i><b>9</b> Use Case Development</a>
<ul>
<li class="chapter" data-level="9.1" data-path="integrated-development-environment.html"><a href="integrated-development-environment.html"><i class="fa fa-check"></i><b>9.1</b> Integrated Development Environment</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="integrated-development-environment.html"><a href="integrated-development-environment.html#github-repository"><i class="fa fa-check"></i><b>9.1.1</b> Github Repository</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="pipeline-workflow.html"><a href="pipeline-workflow.html"><i class="fa fa-check"></i><b>9.2</b> Pipeline Workflow</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="pipeline-workflow.html"><a href="pipeline-workflow.html#airflow-workflow"><i class="fa fa-check"></i><b>9.2.1</b> Airflow Workflow</a></li>
<li class="chapter" data-level="9.2.2" data-path="pipeline-workflow.html"><a href="pipeline-workflow.html#mlflow-1"><i class="fa fa-check"></i><b>9.2.2</b> MLflow</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="building-the-pipeline-steps.html"><a href="building-the-pipeline-steps.html"><i class="fa fa-check"></i><b>9.3</b> Building the Pipeline Steps</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="building-the-pipeline-steps.html"><a href="building-the-pipeline-steps.html#data-preprocessing"><i class="fa fa-check"></i><b>9.3.1</b> Data Preprocessing</a></li>
<li class="chapter" data-level="9.3.2" data-path="building-the-pipeline-steps.html"><a href="building-the-pipeline-steps.html#model-training"><i class="fa fa-check"></i><b>9.3.2</b> Model Training</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="model-serving-inferencing.html"><a href="model-serving-inferencing.html"><i class="fa fa-check"></i><b>9.4</b> Model Serving &amp; Inferencing</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="model-serving-inferencing.html"><a href="model-serving-inferencing.html#model-serving-1"><i class="fa fa-check"></i><b>9.4.1</b> Model Serving</a></li>
<li class="chapter" data-level="9.4.2" data-path="model-serving-inferencing.html"><a href="model-serving-inferencing.html#streamlit-app"><i class="fa fa-check"></i><b>9.4.2</b> Streamlit App</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>10</b> Acknowledgements</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">MLOps Engineering</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="root-directory-module" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Root directory module<a href="root-directory-module.html#root-directory-module" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The root directory of the Terraform infrastructure consists of the main module, calling other submodules that deploy specific infrastructure setting or tools.
This enables to have an overview about the deployment in one place. At first, the necessary cluster infrastructure is deployed such as the <code>vpc</code> and the <code>eks</code> cluster itself. Afterward the custom tools to be run on EKS are deployed, such as <code>airflow</code>, <code>mlflow</code>, and <code>jupyterhub</code>.</p>
<p>The following will look a bit more detailed into the call of the module <code>airflow</code>, yet a lot of it also applies for the other modules.
The module imports are structure in three sections. At first the general information about the module are given, such as <code>name</code> of the module, or the <code>cluster_name</code>, as well as more specific variables needed for specific Terraform calls in the module, like <code>cluster_endpoint</code>.
Terraform does not provide the functionality to <em>activate</em> or <em>deactivate</em> a module by itself. As this is a useful feature, a custom workaround is proposed by setting the count a module as such <code>count = var.deploy_airflow ? 1 : 0</code>. This will set the cound of the module to <code>0</code> or <code>1</code>, depending on the <code>var.deploy_airflow</code> variable. This functionality is proposed for all custom modules.</p>
<p>Secondly, as Airflow needs access to and RDS Database, the RDS module is called. Therefore it is needed to pass the relevant information to create the the RDS under the correct settings, like <code>vpc_id</code>, <code>rds_engine</code>, or <code>storage_type</code>.</p>
<p>Third, variable values for the Airflow Helm chart are passed to the module. Using Helm makes the deployment of Airflow very easy. Since there are customizations on the deployment, such as a connection to the Airflow DAG repository on Github, it is necessary to specify these information beforehand, and to integrate them into the deployment.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb111-1"><a href="root-directory-module.html#cb111-1" aria-hidden="true" tabindex="-1"></a>locals {</span>
<span id="cb111-2"><a href="root-directory-module.html#cb111-2" aria-hidden="true" tabindex="-1"></a>  cluster_name            <span class="op">=</span> <span class="st">&quot;${var.name_prefix}-eks&quot;</span></span>
<span id="cb111-3"><a href="root-directory-module.html#cb111-3" aria-hidden="true" tabindex="-1"></a>  vpc_name                <span class="op">=</span> <span class="st">&quot;${var.name_prefix}-vpc&quot;</span></span>
<span id="cb111-4"><a href="root-directory-module.html#cb111-4" aria-hidden="true" tabindex="-1"></a>  port_airflow            <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">port_airflow</span></span>
<span id="cb111-5"><a href="root-directory-module.html#cb111-5" aria-hidden="true" tabindex="-1"></a>  port_mlflow             <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">port_mlflow</span></span>
<span id="cb111-6"><a href="root-directory-module.html#cb111-6" aria-hidden="true" tabindex="-1"></a>  mlflow_s3_bucket_name   <span class="op">=</span> <span class="st">&quot;${var.name_prefix}-mlflow-bucket&quot;</span></span>
<span id="cb111-7"><a href="root-directory-module.html#cb111-7" aria-hidden="true" tabindex="-1"></a>  force_destroy_s3_bucket <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb111-8"><a href="root-directory-module.html#cb111-8" aria-hidden="true" tabindex="-1"></a>  storage_type            <span class="op">=</span> <span class="st">&quot;gp2&quot;</span></span>
<span id="cb111-9"><a href="root-directory-module.html#cb111-9" aria-hidden="true" tabindex="-1"></a>  max_allocated_storage   <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">max_allocated_storage</span></span>
<span id="cb111-10"><a href="root-directory-module.html#cb111-10" aria-hidden="true" tabindex="-1"></a>  airflow_github_ssh      <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">airflow_github_ssh</span></span>
<span id="cb111-11"><a href="root-directory-module.html#cb111-11" aria-hidden="true" tabindex="-1"></a>  git_username            <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">git_username</span></span>
<span id="cb111-12"><a href="root-directory-module.html#cb111-12" aria-hidden="true" tabindex="-1"></a>  git_token               <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">git_token</span></span>
<span id="cb111-13"><a href="root-directory-module.html#cb111-13" aria-hidden="true" tabindex="-1"></a>  git_repository_url      <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">git_repository_url</span></span>
<span id="cb111-14"><a href="root-directory-module.html#cb111-14" aria-hidden="true" tabindex="-1"></a>  git_branch              <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">git_branch</span></span>
<span id="cb111-15"><a href="root-directory-module.html#cb111-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb111-16"><a href="root-directory-module.html#cb111-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-17"><a href="root-directory-module.html#cb111-17" aria-hidden="true" tabindex="-1"></a>data <span class="st">&quot;aws_caller_identity&quot;</span> <span class="st">&quot;current&quot;</span> {}</span>
<span id="cb111-18"><a href="root-directory-module.html#cb111-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-19"><a href="root-directory-module.html#cb111-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-20"><a href="root-directory-module.html#cb111-20" aria-hidden="true" tabindex="-1"></a># INFRASTRUCTURE</span>
<span id="cb111-21"><a href="root-directory-module.html#cb111-21" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;vpc&quot;</span> {</span>
<span id="cb111-22"><a href="root-directory-module.html#cb111-22" aria-hidden="true" tabindex="-1"></a>  source       <span class="op">=</span> <span class="st">&quot;./infrastructure/vpc&quot;</span></span>
<span id="cb111-23"><a href="root-directory-module.html#cb111-23" aria-hidden="true" tabindex="-1"></a>  cluster_name <span class="op">=</span> local<span class="op">.</span><span class="at">cluster_name</span></span>
<span id="cb111-24"><a href="root-directory-module.html#cb111-24" aria-hidden="true" tabindex="-1"></a>  vpc_name     <span class="op">=</span> local<span class="op">.</span><span class="at">vpc_name</span></span>
<span id="cb111-25"><a href="root-directory-module.html#cb111-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb111-26"><a href="root-directory-module.html#cb111-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-27"><a href="root-directory-module.html#cb111-27" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;eks&quot;</span> {</span>
<span id="cb111-28"><a href="root-directory-module.html#cb111-28" aria-hidden="true" tabindex="-1"></a>  source                <span class="op">=</span> <span class="st">&quot;./infrastructure/eks&quot;</span></span>
<span id="cb111-29"><a href="root-directory-module.html#cb111-29" aria-hidden="true" tabindex="-1"></a>  cluster_name          <span class="op">=</span> local<span class="op">.</span><span class="at">cluster_name</span></span>
<span id="cb111-30"><a href="root-directory-module.html#cb111-30" aria-hidden="true" tabindex="-1"></a>  eks_cluster_version   <span class="op">=</span> <span class="st">&quot;1.23&quot;</span></span>
<span id="cb111-31"><a href="root-directory-module.html#cb111-31" aria-hidden="true" tabindex="-1"></a>  vpc_id                <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">vpc_id</span></span>
<span id="cb111-32"><a href="root-directory-module.html#cb111-32" aria-hidden="true" tabindex="-1"></a>  private_subnets       <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">private_subnets</span></span>
<span id="cb111-33"><a href="root-directory-module.html#cb111-33" aria-hidden="true" tabindex="-1"></a>  security_group_id_one <span class="op">=</span> [module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">worker_group_mgmt_one_id</span>]</span>
<span id="cb111-34"><a href="root-directory-module.html#cb111-34" aria-hidden="true" tabindex="-1"></a>  security_group_id_two <span class="op">=</span> [module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">worker_group_mgmt_two_id</span>]</span>
<span id="cb111-35"><a href="root-directory-module.html#cb111-35" aria-hidden="true" tabindex="-1"></a>  depends_on <span class="op">=</span> [</span>
<span id="cb111-36"><a href="root-directory-module.html#cb111-36" aria-hidden="true" tabindex="-1"></a>    module<span class="op">.</span><span class="at">vpc</span></span>
<span id="cb111-37"><a href="root-directory-module.html#cb111-37" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb111-38"><a href="root-directory-module.html#cb111-38" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb111-39"><a href="root-directory-module.html#cb111-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-40"><a href="root-directory-module.html#cb111-40" aria-hidden="true" tabindex="-1"></a># CUSTOM TOOLS</span>
<span id="cb111-41"><a href="root-directory-module.html#cb111-41" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;airflow&quot;</span> {</span>
<span id="cb111-42"><a href="root-directory-module.html#cb111-42" aria-hidden="true" tabindex="-1"></a>  count            <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">deploy_airflow</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">0</span></span>
<span id="cb111-43"><a href="root-directory-module.html#cb111-43" aria-hidden="true" tabindex="-1"></a>  source           <span class="op">=</span> <span class="st">&quot;./modules/airflow&quot;</span></span>
<span id="cb111-44"><a href="root-directory-module.html#cb111-44" aria-hidden="true" tabindex="-1"></a>  name             <span class="op">=</span> <span class="st">&quot;airflow&quot;</span></span>
<span id="cb111-45"><a href="root-directory-module.html#cb111-45" aria-hidden="true" tabindex="-1"></a>  cluster_name     <span class="op">=</span> local<span class="op">.</span><span class="at">cluster_name</span></span>
<span id="cb111-46"><a href="root-directory-module.html#cb111-46" aria-hidden="true" tabindex="-1"></a>  cluster_endpoint <span class="op">=</span> module<span class="op">.</span><span class="at">eks</span><span class="op">.</span><span class="at">cluster_endpoint</span></span>
<span id="cb111-47"><a href="root-directory-module.html#cb111-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-48"><a href="root-directory-module.html#cb111-48" aria-hidden="true" tabindex="-1"></a>  # RDS</span>
<span id="cb111-49"><a href="root-directory-module.html#cb111-49" aria-hidden="true" tabindex="-1"></a>  vpc_id                      <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">vpc_id</span></span>
<span id="cb111-50"><a href="root-directory-module.html#cb111-50" aria-hidden="true" tabindex="-1"></a>  private_subnets             <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">private_subnets</span></span>
<span id="cb111-51"><a href="root-directory-module.html#cb111-51" aria-hidden="true" tabindex="-1"></a>  private_subnets_cidr_blocks <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">private_subnets_cidr_blocks</span></span>
<span id="cb111-52"><a href="root-directory-module.html#cb111-52" aria-hidden="true" tabindex="-1"></a>  rds_port                    <span class="op">=</span> local<span class="op">.</span><span class="at">port_airflow</span></span>
<span id="cb111-53"><a href="root-directory-module.html#cb111-53" aria-hidden="true" tabindex="-1"></a>  rds_name                    <span class="op">=</span> <span class="st">&quot;airflow&quot;</span></span>
<span id="cb111-54"><a href="root-directory-module.html#cb111-54" aria-hidden="true" tabindex="-1"></a>  rds_engine                  <span class="op">=</span> <span class="st">&quot;postgres&quot;</span></span>
<span id="cb111-55"><a href="root-directory-module.html#cb111-55" aria-hidden="true" tabindex="-1"></a>  rds_engine_version          <span class="op">=</span> <span class="st">&quot;13.3&quot;</span></span>
<span id="cb111-56"><a href="root-directory-module.html#cb111-56" aria-hidden="true" tabindex="-1"></a>  rds_instance_class          <span class="op">=</span> <span class="st">&quot;db.t3.micro&quot;</span></span>
<span id="cb111-57"><a href="root-directory-module.html#cb111-57" aria-hidden="true" tabindex="-1"></a>  storage_type                <span class="op">=</span> local<span class="op">.</span><span class="at">storage_type</span></span>
<span id="cb111-58"><a href="root-directory-module.html#cb111-58" aria-hidden="true" tabindex="-1"></a>  max_allocated_storage       <span class="op">=</span> local<span class="op">.</span><span class="at">max_allocated_storage</span></span>
<span id="cb111-59"><a href="root-directory-module.html#cb111-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-60"><a href="root-directory-module.html#cb111-60" aria-hidden="true" tabindex="-1"></a>  # HELM</span>
<span id="cb111-61"><a href="root-directory-module.html#cb111-61" aria-hidden="true" tabindex="-1"></a>  helm_chart_repository <span class="op">=</span> <span class="st">&quot;https://airflow-helm.github.io/charts&quot;</span></span>
<span id="cb111-62"><a href="root-directory-module.html#cb111-62" aria-hidden="true" tabindex="-1"></a>  helm_chart_name       <span class="op">=</span> <span class="st">&quot;airflow&quot;</span></span>
<span id="cb111-63"><a href="root-directory-module.html#cb111-63" aria-hidden="true" tabindex="-1"></a>  helm_chart_version    <span class="op">=</span> <span class="st">&quot;8.6.1&quot;</span></span>
<span id="cb111-64"><a href="root-directory-module.html#cb111-64" aria-hidden="true" tabindex="-1"></a>  git_username          <span class="op">=</span> local<span class="op">.</span><span class="at">git_username</span></span>
<span id="cb111-65"><a href="root-directory-module.html#cb111-65" aria-hidden="true" tabindex="-1"></a>  git_token             <span class="op">=</span> local<span class="op">.</span><span class="at">git_token</span></span>
<span id="cb111-66"><a href="root-directory-module.html#cb111-66" aria-hidden="true" tabindex="-1"></a>  git_repository_url    <span class="op">=</span> local<span class="op">.</span><span class="at">git_repository_url</span></span>
<span id="cb111-67"><a href="root-directory-module.html#cb111-67" aria-hidden="true" tabindex="-1"></a>  git_branch            <span class="op">=</span> local<span class="op">.</span><span class="at">git_branch</span></span>
<span id="cb111-68"><a href="root-directory-module.html#cb111-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-69"><a href="root-directory-module.html#cb111-69" aria-hidden="true" tabindex="-1"></a>  depends_on <span class="op">=</span> [</span>
<span id="cb111-70"><a href="root-directory-module.html#cb111-70" aria-hidden="true" tabindex="-1"></a>    module<span class="op">.</span><span class="at">eks</span></span>
<span id="cb111-71"><a href="root-directory-module.html#cb111-71" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb111-72"><a href="root-directory-module.html#cb111-72" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb111-73"><a href="root-directory-module.html#cb111-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-74"><a href="root-directory-module.html#cb111-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-75"><a href="root-directory-module.html#cb111-75" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;mlflow&quot;</span> {</span>
<span id="cb111-76"><a href="root-directory-module.html#cb111-76" aria-hidden="true" tabindex="-1"></a>  count                 <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">deploy_mlflow</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">0</span></span>
<span id="cb111-77"><a href="root-directory-module.html#cb111-77" aria-hidden="true" tabindex="-1"></a>  source                <span class="op">=</span> <span class="st">&quot;./modules/mlflow&quot;</span></span>
<span id="cb111-78"><a href="root-directory-module.html#cb111-78" aria-hidden="true" tabindex="-1"></a>  name                  <span class="op">=</span> <span class="st">&quot;mlflow&quot;</span></span>
<span id="cb111-79"><a href="root-directory-module.html#cb111-79" aria-hidden="true" tabindex="-1"></a>  mlflow_s3_bucket_name <span class="op">=</span> local<span class="op">.</span><span class="at">mlflow_s3_bucket_name</span></span>
<span id="cb111-80"><a href="root-directory-module.html#cb111-80" aria-hidden="true" tabindex="-1"></a>  s3_force_destroy      <span class="op">=</span> local<span class="op">.</span><span class="at">force_destroy_s3_bucket</span></span>
<span id="cb111-81"><a href="root-directory-module.html#cb111-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-82"><a href="root-directory-module.html#cb111-82" aria-hidden="true" tabindex="-1"></a>  # RDS</span>
<span id="cb111-83"><a href="root-directory-module.html#cb111-83" aria-hidden="true" tabindex="-1"></a>  vpc_id                      <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">vpc_id</span></span>
<span id="cb111-84"><a href="root-directory-module.html#cb111-84" aria-hidden="true" tabindex="-1"></a>  private_subnets             <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">private_subnets</span></span>
<span id="cb111-85"><a href="root-directory-module.html#cb111-85" aria-hidden="true" tabindex="-1"></a>  private_subnets_cidr_blocks <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">private_subnets_cidr_blocks</span></span>
<span id="cb111-86"><a href="root-directory-module.html#cb111-86" aria-hidden="true" tabindex="-1"></a>  rds_port                    <span class="op">=</span> local<span class="op">.</span><span class="at">port_mlflow</span></span>
<span id="cb111-87"><a href="root-directory-module.html#cb111-87" aria-hidden="true" tabindex="-1"></a>  rds_name                    <span class="op">=</span> <span class="st">&quot;mlflow&quot;</span></span>
<span id="cb111-88"><a href="root-directory-module.html#cb111-88" aria-hidden="true" tabindex="-1"></a>  rds_engine                  <span class="op">=</span> <span class="st">&quot;mysql&quot;</span></span>
<span id="cb111-89"><a href="root-directory-module.html#cb111-89" aria-hidden="true" tabindex="-1"></a>  rds_engine_version          <span class="op">=</span> <span class="st">&quot;8.0.30&quot;</span></span>
<span id="cb111-90"><a href="root-directory-module.html#cb111-90" aria-hidden="true" tabindex="-1"></a>  rds_instance_class          <span class="op">=</span> <span class="st">&quot;db.t3.micro&quot;</span></span>
<span id="cb111-91"><a href="root-directory-module.html#cb111-91" aria-hidden="true" tabindex="-1"></a>  storage_type                <span class="op">=</span> local<span class="op">.</span><span class="at">storage_type</span></span>
<span id="cb111-92"><a href="root-directory-module.html#cb111-92" aria-hidden="true" tabindex="-1"></a>  max_allocated_storage       <span class="op">=</span> local<span class="op">.</span><span class="at">max_allocated_storage</span></span>
<span id="cb111-93"><a href="root-directory-module.html#cb111-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-94"><a href="root-directory-module.html#cb111-94" aria-hidden="true" tabindex="-1"></a>  depends_on <span class="op">=</span> [</span>
<span id="cb111-95"><a href="root-directory-module.html#cb111-95" aria-hidden="true" tabindex="-1"></a>    module<span class="op">.</span><span class="at">eks</span></span>
<span id="cb111-96"><a href="root-directory-module.html#cb111-96" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb111-97"><a href="root-directory-module.html#cb111-97" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb111-98"><a href="root-directory-module.html#cb111-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-99"><a href="root-directory-module.html#cb111-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-100"><a href="root-directory-module.html#cb111-100" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;jupyterhub&quot;</span> {</span>
<span id="cb111-101"><a href="root-directory-module.html#cb111-101" aria-hidden="true" tabindex="-1"></a>  count            <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">deploy_jupyterhub</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">0</span></span>
<span id="cb111-102"><a href="root-directory-module.html#cb111-102" aria-hidden="true" tabindex="-1"></a>  source           <span class="op">=</span> <span class="st">&quot;./modules/jupyterhub&quot;</span></span>
<span id="cb111-103"><a href="root-directory-module.html#cb111-103" aria-hidden="true" tabindex="-1"></a>  name             <span class="op">=</span> <span class="st">&quot;jupyterhub&quot;</span></span>
<span id="cb111-104"><a href="root-directory-module.html#cb111-104" aria-hidden="true" tabindex="-1"></a>  cluster_name     <span class="op">=</span> local<span class="op">.</span><span class="at">cluster_name</span></span>
<span id="cb111-105"><a href="root-directory-module.html#cb111-105" aria-hidden="true" tabindex="-1"></a>  cluster_endpoint <span class="op">=</span> module<span class="op">.</span><span class="at">eks</span><span class="op">.</span><span class="at">cluster_endpoint</span></span>
<span id="cb111-106"><a href="root-directory-module.html#cb111-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-107"><a href="root-directory-module.html#cb111-107" aria-hidden="true" tabindex="-1"></a>  # HELM</span>
<span id="cb111-108"><a href="root-directory-module.html#cb111-108" aria-hidden="true" tabindex="-1"></a>  helm_chart_repository <span class="op">=</span> <span class="st">&quot;https://jupyterhub.github.io/helm-chart/&quot;</span></span>
<span id="cb111-109"><a href="root-directory-module.html#cb111-109" aria-hidden="true" tabindex="-1"></a>  helm_chart_name       <span class="op">=</span> <span class="st">&quot;jupyterhub&quot;</span></span>
<span id="cb111-110"><a href="root-directory-module.html#cb111-110" aria-hidden="true" tabindex="-1"></a>  helm_chart_version    <span class="op">=</span> <span class="st">&quot;2.0.0&quot;</span></span>
<span id="cb111-111"><a href="root-directory-module.html#cb111-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-112"><a href="root-directory-module.html#cb111-112" aria-hidden="true" tabindex="-1"></a>  depends_on <span class="op">=</span> [</span>
<span id="cb111-113"><a href="root-directory-module.html#cb111-113" aria-hidden="true" tabindex="-1"></a>    module<span class="op">.</span><span class="at">eks</span></span>
<span id="cb111-114"><a href="root-directory-module.html#cb111-114" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb111-115"><a href="root-directory-module.html#cb111-115" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb111-116"><a href="root-directory-module.html#cb111-116" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="ml-platform-deployment.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="infrastructure-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/seblum/kubernetes-training/edit/master/08.1-Deployment_Infrastructure_Root.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
