<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8.1 Root module | MLOps Engineering</title>
  <meta name="description" content="Implementing an MLOps infrastructure with Airflow and MLFlow utilizing K8s, Terraform, and GithubActions." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="8.1 Root module | MLOps Engineering" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Implementing an MLOps infrastructure with Airflow and MLFlow utilizing K8s, Terraform, and GithubActions." />
  <meta name="github-repo" content="seblum/mlops-engineering-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8.1 Root module | MLOps Engineering" />
  
  <meta name="twitter:description" content="Implementing an MLOps infrastructure with Airflow and MLFlow utilizing K8s, Terraform, and GithubActions." />
  

<meta name="author" content="Sebastian Blum" />


<meta name="date" content="2024-02-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="platform-deployment.html"/>
<link rel="next" href="infrastructure-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MLOps Engineering</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html"><i class="fa fa-check"></i>Preamble</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="machine-learning-workflow.html"><a href="machine-learning-workflow.html"><i class="fa fa-check"></i><b>1.1</b> Machine Learning Workflow</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="machine-learning-workflow.html"><a href="machine-learning-workflow.html#ml-worflow-tools"><i class="fa fa-check"></i><b>1.1.1</b> ML Worflow Tools</a></li>
<li class="chapter" data-level="1.1.2" data-path="machine-learning-workflow.html"><a href="machine-learning-workflow.html#developing-machine-learning-models"><i class="fa fa-check"></i><b>1.1.2</b> Developing Machine Learning Models</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="machine-learning-operations-mlops.html"><a href="machine-learning-operations-mlops.html"><i class="fa fa-check"></i><b>1.2</b> Machine Learning Operations (MLOps)</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="machine-learning-operations-mlops.html"><a href="machine-learning-operations-mlops.html#ml-dev-ops"><i class="fa fa-check"></i><b>1.2.1</b> ML + (Dev)-Ops</a></li>
<li class="chapter" data-level="1.2.2" data-path="machine-learning-operations-mlops.html"><a href="machine-learning-operations-mlops.html#mlops-lifecycle"><i class="fa fa-check"></i><b>1.2.2</b> MLOps Lifecycle</a></li>
<li class="chapter" data-level="1.2.3" data-path="machine-learning-operations-mlops.html"><a href="machine-learning-operations-mlops.html#mlops-engineering"><i class="fa fa-check"></i><b>1.2.3</b> MLOps Engineering</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html"><i class="fa fa-check"></i><b>1.3</b> Roles and Tasks in MLOps</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#data-engineer"><i class="fa fa-check"></i><b>1.3.1</b> Data Engineer</a></li>
<li class="chapter" data-level="1.3.2" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#data-scientist"><i class="fa fa-check"></i><b>1.3.2</b> Data Scientist</a></li>
<li class="chapter" data-level="1.3.3" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#ml-engineer"><i class="fa fa-check"></i><b>1.3.3</b> ML Engineer</a></li>
<li class="chapter" data-level="1.3.4" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#mlops-engineer"><i class="fa fa-check"></i><b>1.3.4</b> MLOps Engineer</a></li>
<li class="chapter" data-level="1.3.5" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#devops-engineer"><i class="fa fa-check"></i><b>1.3.5</b> DevOps Engineer</a></li>
<li class="chapter" data-level="1.3.6" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#additional-roles-function"><i class="fa fa-check"></i><b>1.3.6</b> Additional roles &amp; function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ops-tools-and-principles.html"><a href="ops-tools-and-principles.html"><i class="fa fa-check"></i><b>2</b> Ops Tools and Principles</a>
<ul>
<li class="chapter" data-level="2.1" data-path="containerization.html"><a href="containerization.html"><i class="fa fa-check"></i><b>2.1</b> Containerization</a></li>
<li class="chapter" data-level="2.2" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i><b>2.2</b> Version Control</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="version-control.html"><a href="version-control.html#github"><i class="fa fa-check"></i><b>2.2.1</b> Github</a></li>
<li class="chapter" data-level="2.2.2" data-path="version-control.html"><a href="version-control.html#git-lifecycle"><i class="fa fa-check"></i><b>2.2.2</b> Git lifecycle</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="cicd.html"><a href="cicd.html"><i class="fa fa-check"></i><b>2.3</b> CI/CD</a>
<ul>
<li class="chapter" data-level="" data-path="cicd.html"><a href="cicd.html#github-actions"><i class="fa fa-check"></i>Github Actions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="infrastructure-as-code.html"><a href="infrastructure-as-code.html"><i class="fa fa-check"></i><b>2.4</b> Infrastructure as code</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="airflow.html"><a href="airflow.html"><i class="fa fa-check"></i><b>3</b> Airflow</a>
<ul>
<li class="chapter" data-level="3.1" data-path="core-components.html"><a href="core-components.html"><i class="fa fa-check"></i><b>3.1</b> Core Components</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="core-components.html"><a href="core-components.html#dags"><i class="fa fa-check"></i><b>3.1.1</b> DAGs</a></li>
<li class="chapter" data-level="3.1.2" data-path="core-components.html"><a href="core-components.html#operators"><i class="fa fa-check"></i><b>3.1.2</b> Operators</a></li>
<li class="chapter" data-level="3.1.3" data-path="core-components.html"><a href="core-components.html#tasks"><i class="fa fa-check"></i><b>3.1.3</b> Tasks</a></li>
<li class="chapter" data-level="3.1.4" data-path="core-components.html"><a href="core-components.html#xcom"><i class="fa fa-check"></i><b>3.1.4</b> XCom</a></li>
<li class="chapter" data-level="3.1.5" data-path="core-components.html"><a href="core-components.html#scheduling"><i class="fa fa-check"></i><b>3.1.5</b> Scheduling</a></li>
<li class="chapter" data-level="3.1.6" data-path="core-components.html"><a href="core-components.html#taskflow"><i class="fa fa-check"></i><b>3.1.6</b> Taskflow</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="exemplary-ml-workflow.html"><a href="exemplary-ml-workflow.html"><i class="fa fa-check"></i><b>3.2</b> Exemplary ML workflow</a></li>
<li class="chapter" data-level="3.3" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html"><i class="fa fa-check"></i><b>3.3</b> Airflow infrastructure</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#airflow-as-a-distributed-system"><i class="fa fa-check"></i><b>3.3.1</b> Airflow as a distributed system</a></li>
<li class="chapter" data-level="3.3.2" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#scheduler"><i class="fa fa-check"></i><b>3.3.2</b> Scheduler</a></li>
<li class="chapter" data-level="3.3.3" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#webserver"><i class="fa fa-check"></i><b>3.3.3</b> Webserver</a></li>
<li class="chapter" data-level="3.3.4" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#executor"><i class="fa fa-check"></i><b>3.3.4</b> Executor</a></li>
<li class="chapter" data-level="3.3.5" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#dag-directory"><i class="fa fa-check"></i><b>3.3.5</b> DAG Directory</a></li>
<li class="chapter" data-level="3.3.6" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#metadata-database"><i class="fa fa-check"></i><b>3.3.6</b> Metadata Database</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mlflow.html"><a href="mlflow.html"><i class="fa fa-check"></i><b>4</b> MLflow</a>
<ul>
<li class="chapter" data-level="4.1" data-path="core-components-1.html"><a href="core-components-1.html"><i class="fa fa-check"></i><b>4.1</b> Core Components</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="core-components-1.html"><a href="core-components-1.html#mlflow-tracking"><i class="fa fa-check"></i><b>4.1.1</b> MLflow Tracking</a></li>
<li class="chapter" data-level="4.1.2" data-path="core-components-1.html"><a href="core-components-1.html#mlflow-models"><i class="fa fa-check"></i><b>4.1.2</b> MLflow Models</a></li>
<li class="chapter" data-level="4.1.3" data-path="core-components-1.html"><a href="core-components-1.html#mlflow-model-registry"><i class="fa fa-check"></i><b>4.1.3</b> MLflow Model Registry</a></li>
<li class="chapter" data-level="4.1.4" data-path="core-components-1.html"><a href="core-components-1.html#mlflow-projects"><i class="fa fa-check"></i><b>4.1.4</b> MLflow Projects</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="mlfflow-architecture.html"><a href="mlfflow-architecture.html"><i class="fa fa-check"></i><b>4.2</b> MLFflow Architecture</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="mlfflow-architecture.html"><a href="mlfflow-architecture.html#mlflow-tracking-server"><i class="fa fa-check"></i><b>4.2.1</b> MLflow Tracking Server</a></li>
<li class="chapter" data-level="4.2.2" data-path="mlfflow-architecture.html"><a href="mlfflow-architecture.html#mlflow-backend-store"><i class="fa fa-check"></i><b>4.2.2</b> MLflow Backend Store</a></li>
<li class="chapter" data-level="4.2.3" data-path="mlfflow-architecture.html"><a href="mlfflow-architecture.html#mlflow-artifact-store"><i class="fa fa-check"></i><b>4.2.3</b> MLflow Artifact Store</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="kubernetes.html"><a href="kubernetes.html"><i class="fa fa-check"></i><b>5</b> Kubernetes</a>
<ul>
<li class="chapter" data-level="5.1" data-path="core-components-2.html"><a href="core-components-2.html"><i class="fa fa-check"></i><b>5.1</b> Core Components</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="core-components-2.html"><a href="core-components-2.html#nodes"><i class="fa fa-check"></i><b>5.1.1</b> Nodes</a></li>
<li class="chapter" data-level="5.1.2" data-path="core-components-2.html"><a href="core-components-2.html#pods"><i class="fa fa-check"></i><b>5.1.2</b> Pods</a></li>
<li class="chapter" data-level="5.1.3" data-path="core-components-2.html"><a href="core-components-2.html#imperative-declarative-management"><i class="fa fa-check"></i><b>5.1.3</b> Imperative &amp; Declarative Management</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="application-deployment-design.html"><a href="application-deployment-design.html"><i class="fa fa-check"></i><b>5.2</b> Application Deployment &amp; Design</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="application-deployment-design.html"><a href="application-deployment-design.html#deployments"><i class="fa fa-check"></i><b>5.2.1</b> Deployments</a></li>
<li class="chapter" data-level="5.2.2" data-path="application-deployment-design.html"><a href="application-deployment-design.html#resource-management"><i class="fa fa-check"></i><b>5.2.2</b> Resource Management</a></li>
<li class="chapter" data-level="5.2.3" data-path="application-deployment-design.html"><a href="application-deployment-design.html#daemonsets"><i class="fa fa-check"></i><b>5.2.3</b> DaemonSets</a></li>
<li class="chapter" data-level="5.2.4" data-path="application-deployment-design.html"><a href="application-deployment-design.html#statefulsets"><i class="fa fa-check"></i><b>5.2.4</b> StatefulSets</a></li>
<li class="chapter" data-level="5.2.5" data-path="application-deployment-design.html"><a href="application-deployment-design.html#jobs-cron-jobs"><i class="fa fa-check"></i><b>5.2.5</b> Jobs &amp; Cron Jobs</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="services-and-networking.html"><a href="services-and-networking.html"><i class="fa fa-check"></i><b>5.3</b> Services and Networking</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="services-and-networking.html"><a href="services-and-networking.html#services"><i class="fa fa-check"></i><b>5.3.1</b> Services</a></li>
<li class="chapter" data-level="5.3.2" data-path="services-and-networking.html"><a href="services-and-networking.html#service-discovery"><i class="fa fa-check"></i><b>5.3.2</b> Service Discovery</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="volumes-and-storage.html"><a href="volumes-and-storage.html"><i class="fa fa-check"></i><b>5.4</b> Volumes and Storage</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="volumes-and-storage.html"><a href="volumes-and-storage.html#emptydir-volume"><i class="fa fa-check"></i><b>5.4.1</b> EmptyDir Volume</a></li>
<li class="chapter" data-level="5.4.2" data-path="volumes-and-storage.html"><a href="volumes-and-storage.html#hostpath-volume"><i class="fa fa-check"></i><b>5.4.2</b> HostPath Volume</a></li>
<li class="chapter" data-level="5.4.3" data-path="volumes-and-storage.html"><a href="volumes-and-storage.html#persistent-volumes"><i class="fa fa-check"></i><b>5.4.3</b> Persistent Volumes</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html"><i class="fa fa-check"></i><b>5.5</b> Environment, Configuration &amp; Security</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html#namespaces"><i class="fa fa-check"></i><b>5.5.1</b> Namespaces</a></li>
<li class="chapter" data-level="5.5.2" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html#labels-selectors-and-annotations"><i class="fa fa-check"></i><b>5.5.2</b> Labels, Selectors and Annotations</a></li>
<li class="chapter" data-level="5.5.3" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html#configmaps"><i class="fa fa-check"></i><b>5.5.3</b> ConfigMaps</a></li>
<li class="chapter" data-level="5.5.4" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html#secrets"><i class="fa fa-check"></i><b>5.5.4</b> Secrets</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="observability-maintenance.html"><a href="observability-maintenance.html"><i class="fa fa-check"></i><b>5.6</b> Observability &amp; Maintenance</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="observability-maintenance.html"><a href="observability-maintenance.html#health-checks"><i class="fa fa-check"></i><b>5.6.1</b> Health Checks</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="helm.html"><a href="helm.html"><i class="fa fa-check"></i><b>5.7</b> Helm</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="helm.html"><a href="helm.html#helm-chart-structure"><i class="fa fa-check"></i><b>5.7.1</b> Helm Chart Structure</a></li>
<li class="chapter" data-level="5.7.2" data-path="helm.html"><a href="helm.html#working-with-helm"><i class="fa fa-check"></i><b>5.7.2</b> Working with Helm</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="terraform.html"><a href="terraform.html"><i class="fa fa-check"></i><b>6</b> Terraform</a>
<ul>
<li class="chapter" data-level="6.1" data-path="basic-usage.html"><a href="basic-usage.html"><i class="fa fa-check"></i><b>6.1</b> Basic usage</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="basic-usage.html"><a href="basic-usage.html#terraform-init"><i class="fa fa-check"></i><b>6.1.1</b> terraform init</a></li>
<li class="chapter" data-level="6.1.2" data-path="basic-usage.html"><a href="basic-usage.html#terraform-validate"><i class="fa fa-check"></i><b>6.1.2</b> terraform validate</a></li>
<li class="chapter" data-level="6.1.3" data-path="basic-usage.html"><a href="basic-usage.html#terraform-plan"><i class="fa fa-check"></i><b>6.1.3</b> terraform plan</a></li>
<li class="chapter" data-level="6.1.4" data-path="basic-usage.html"><a href="basic-usage.html#terraform-apply"><i class="fa fa-check"></i><b>6.1.4</b> terraform apply</a></li>
<li class="chapter" data-level="6.1.5" data-path="basic-usage.html"><a href="basic-usage.html#terraform-destroy"><i class="fa fa-check"></i><b>6.1.5</b> terraform destroy</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="core-components-3.html"><a href="core-components-3.html"><i class="fa fa-check"></i><b>6.2</b> Core Components</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="core-components-3.html"><a href="core-components-3.html#providers"><i class="fa fa-check"></i><b>6.2.1</b> Providers</a></li>
<li class="chapter" data-level="6.2.2" data-path="core-components-3.html"><a href="core-components-3.html#resources"><i class="fa fa-check"></i><b>6.2.2</b> Resources</a></li>
<li class="chapter" data-level="6.2.3" data-path="core-components-3.html"><a href="core-components-3.html#data-sources"><i class="fa fa-check"></i><b>6.2.3</b> Data Sources</a></li>
<li class="chapter" data-level="6.2.4" data-path="core-components-3.html"><a href="core-components-3.html#state"><i class="fa fa-check"></i><b>6.2.4</b> State</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="modules.html"><a href="modules.html"><i class="fa fa-check"></i><b>6.3</b> Modules</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="modules.html"><a href="modules.html#input-variables"><i class="fa fa-check"></i><b>6.3.1</b> Input Variables</a></li>
<li class="chapter" data-level="6.3.2" data-path="modules.html"><a href="modules.html#output-variables"><i class="fa fa-check"></i><b>6.3.2</b> Output Variables</a></li>
<li class="chapter" data-level="6.3.3" data-path="modules.html"><a href="modules.html#local-variables"><i class="fa fa-check"></i><b>6.3.3</b> Local Variables</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html"><i class="fa fa-check"></i><b>6.4</b> Additional tips &amp; tricks</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html#count"><i class="fa fa-check"></i><b>6.4.1</b> count</a></li>
<li class="chapter" data-level="6.4.2" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html#for-each"><i class="fa fa-check"></i><b>6.4.2</b> for-each</a></li>
<li class="chapter" data-level="6.4.3" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html#for"><i class="fa fa-check"></i><b>6.4.3</b> for</a></li>
<li class="chapter" data-level="6.4.4" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html#workspaces"><i class="fa fa-check"></i><b>6.4.4</b> Workspaces</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="exemplary-deployment.html"><a href="exemplary-deployment.html"><i class="fa fa-check"></i><b>6.5</b> Exemplary Deployment</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="exemplary-deployment.html"><a href="exemplary-deployment.html#root"><i class="fa fa-check"></i><b>6.5.1</b> root</a></li>
<li class="chapter" data-level="6.5.2" data-path="exemplary-deployment.html"><a href="exemplary-deployment.html#vpc"><i class="fa fa-check"></i><b>6.5.2</b> vpc</a></li>
<li class="chapter" data-level="6.5.3" data-path="exemplary-deployment.html"><a href="exemplary-deployment.html#run-the-code"><i class="fa fa-check"></i><b>6.5.3</b> Run the code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ml-platform-design.html"><a href="ml-platform-design.html"><i class="fa fa-check"></i><b>7</b> ML Platform Design</a>
<ul>
<li class="chapter" data-level="" data-path="ml-platform-design.html"><a href="ml-platform-design.html#overview"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="" data-path="ml-platform-design.html"><a href="ml-platform-design.html#infrastructure"><i class="fa fa-check"></i>Infrastructure</a></li>
<li class="chapter" data-level="" data-path="ml-platform-design.html"><a href="ml-platform-design.html#mlops-tools"><i class="fa fa-check"></i>MLOps Tools</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="platform-deployment.html"><a href="platform-deployment.html"><i class="fa fa-check"></i><b>8</b> Platform Deployment</a>
<ul>
<li class="chapter" data-level="8.1" data-path="root-module.html"><a href="root-module.html"><i class="fa fa-check"></i><b>8.1</b> Root module</a></li>
<li class="chapter" data-level="8.2" data-path="infrastructure-2.html"><a href="infrastructure-2.html"><i class="fa fa-check"></i><b>8.2</b> Infrastructure</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="infrastructure-2.html"><a href="infrastructure-2.html#virtual-private-cloud"><i class="fa fa-check"></i><b>8.2.1</b> Virtual Private Cloud</a></li>
<li class="chapter" data-level="8.2.2" data-path="infrastructure-2.html"><a href="infrastructure-2.html#elastic-kubernetes-service"><i class="fa fa-check"></i><b>8.2.2</b> Elastic Kubernetes Service</a></li>
<li class="chapter" data-level="8.2.3" data-path="infrastructure-2.html"><a href="infrastructure-2.html#networking"><i class="fa fa-check"></i><b>8.2.3</b> Networking</a></li>
<li class="chapter" data-level="8.2.4" data-path="infrastructure-2.html"><a href="infrastructure-2.html#relational-database-service"><i class="fa fa-check"></i><b>8.2.4</b> Relational Database Service</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="components.html"><a href="components.html"><i class="fa fa-check"></i><b>8.3</b> Components</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="components.html"><a href="components.html#user-profiles"><i class="fa fa-check"></i><b>8.3.1</b> User Profiles</a></li>
<li class="chapter" data-level="8.3.2" data-path="components.html"><a href="components.html#airflow-1"><i class="fa fa-check"></i><b>8.3.2</b> Airflow</a></li>
<li class="chapter" data-level="8.3.3" data-path="components.html"><a href="components.html#mlflow-1"><i class="fa fa-check"></i><b>8.3.3</b> Mlflow</a></li>
<li class="chapter" data-level="8.3.4" data-path="components.html"><a href="components.html#jupyterhub"><i class="fa fa-check"></i><b>8.3.4</b> Jupyterhub</a></li>
<li class="chapter" data-level="8.3.5" data-path="components.html"><a href="components.html#monitoring"><i class="fa fa-check"></i><b>8.3.5</b> Monitoring</a></li>
<li class="chapter" data-level="8.3.6" data-path="components.html"><a href="components.html#sagemaker"><i class="fa fa-check"></i><b>8.3.6</b> Sagemaker</a></li>
<li class="chapter" data-level="8.3.7" data-path="components.html"><a href="components.html#dashboard"><i class="fa fa-check"></i><b>8.3.7</b> Dashboard</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="design-decisions.html"><a href="design-decisions.html"><i class="fa fa-check"></i><b>8.4</b> Design Decisions</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="use-case-development.html"><a href="use-case-development.html"><i class="fa fa-check"></i><b>9</b> Use Case Development</a>
<ul>
<li class="chapter" data-level="9.1" data-path="integrated-development-environment-1.html"><a href="integrated-development-environment-1.html"><i class="fa fa-check"></i><b>9.1</b> Integrated Development Environment</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="integrated-development-environment-1.html"><a href="integrated-development-environment-1.html#github-repository"><i class="fa fa-check"></i><b>9.1.1</b> Github Repository</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="training-deployment-pipeline-workflow.html"><a href="training-deployment-pipeline-workflow.html"><i class="fa fa-check"></i><b>9.2</b> Training &amp; Deployment Pipeline Workflow</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="training-deployment-pipeline-workflow.html"><a href="training-deployment-pipeline-workflow.html#airflow-workflow"><i class="fa fa-check"></i><b>9.2.1</b> Airflow Workflow</a></li>
<li class="chapter" data-level="9.2.2" data-path="training-deployment-pipeline-workflow.html"><a href="training-deployment-pipeline-workflow.html#mlflow-integration"><i class="fa fa-check"></i><b>9.2.2</b> MLflow integration</a></li>
<li class="chapter" data-level="9.2.3" data-path="training-deployment-pipeline-workflow.html"><a href="training-deployment-pipeline-workflow.html#pipeline-workflow"><i class="fa fa-check"></i><b>9.2.3</b> Pipeline Workflow</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="pipeline-workflow-steps.html"><a href="pipeline-workflow-steps.html"><i class="fa fa-check"></i><b>9.3</b> Pipeline Workflow Steps</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="pipeline-workflow-steps.html"><a href="pipeline-workflow-steps.html#data-preprocessing"><i class="fa fa-check"></i><b>9.3.1</b> Data Preprocessing</a></li>
<li class="chapter" data-level="9.3.2" data-path="pipeline-workflow-steps.html"><a href="pipeline-workflow-steps.html#model-training"><i class="fa fa-check"></i><b>9.3.2</b> Model Training</a></li>
<li class="chapter" data-level="9.3.3" data-path="pipeline-workflow-steps.html"><a href="pipeline-workflow-steps.html#model-comparison"><i class="fa fa-check"></i><b>9.3.3</b> Model Comparison</a></li>
<li class="chapter" data-level="9.3.4" data-path="pipeline-workflow-steps.html"><a href="pipeline-workflow-steps.html#model-deployment-serving"><i class="fa fa-check"></i><b>9.3.4</b> Model Deployment &amp; Serving</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="model-inferencing.html"><a href="model-inferencing.html"><i class="fa fa-check"></i><b>9.4</b> Model Inferencing</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="model-inferencing.html"><a href="model-inferencing.html#pipeline-workflow-1"><i class="fa fa-check"></i><b>9.4.1</b> Pipeline Workflow</a></li>
<li class="chapter" data-level="9.4.2" data-path="model-inferencing.html"><a href="model-inferencing.html#inference-workflow-code"><i class="fa fa-check"></i><b>9.4.2</b> Inference Workflow Code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="contributing.html"><a href="contributing.html"><i class="fa fa-check"></i>Contributing</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">MLOps Engineering</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="root-module" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Root module<a href="root-module.html#root-module" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The root directory of the Terraform infrastructure consists of the main module, calling other submodules that deploy specific infrastructure setting or tools.
This enables to have an overview about the deployment in one place. At first, the necessary cluster infrastructure is deployed such as the <code>vpc</code> and the <code>eks</code> cluster itself. Afterward the custom tools to be run on EKS are deployed, such as <code>airflow</code>, <code>mlflow</code>, and <code>jupyterhub</code>.</p>
<p>The following will look a bit more detailed into the call of the module <code>airflow</code>, yet a lot of it also applies for the other modules.
The module imports are structure in three parts. At first the general information about the module are given, such as <code>name</code> of the module, or the <code>cluster_name</code>, as well as more specific variables needed for specific Terraform calls in the module, like <code>cluster_endpoint</code>.
Terraform does not provide the functionality to <em>activate</em> or <em>deactivate</em> a module by itself. As this is a useful feature, a custom workaround is proposed by setting the count a module as such <code>count = var.deploy_airflow ? 1 : 0</code>. This will set the cound of the module to <code>0</code> or <code>1</code>, depending on the <code>var.deploy_airflow</code> variable. This functionality is proposed for all custom modules.</p>
<p>Secondly, as Airflow needs access to and RDS Database, the RDS module is called. Therefore it is needed to pass the relevant information to create the the RDS under the correct settings, like <code>vpc_id</code>, <code>rds_engine</code>, or <code>storage_type</code>.</p>
<p>Third, variable values for the Airflow Helm chart are passed to the module. Using Helm makes the deployment of Airflow very easy. Since there are customizations on the deployment, such as a connection to the Airflow DAG repository on Github, it is necessary to specify these information beforehand, and to integrate them into the deployment.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb122-1"><a href="root-module.html#cb122-1" aria-hidden="true" tabindex="-1"></a>locals {</span>
<span id="cb122-2"><a href="root-module.html#cb122-2" aria-hidden="true" tabindex="-1"></a>  cluster_name            <span class="op">=</span> <span class="st">&quot;${var.name_prefix}-eks&quot;</span></span>
<span id="cb122-3"><a href="root-module.html#cb122-3" aria-hidden="true" tabindex="-1"></a>  vpc_name                <span class="op">=</span> <span class="st">&quot;${var.name_prefix}-vpc&quot;</span></span>
<span id="cb122-4"><a href="root-module.html#cb122-4" aria-hidden="true" tabindex="-1"></a>  port_airflow            <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">port_airflow</span></span>
<span id="cb122-5"><a href="root-module.html#cb122-5" aria-hidden="true" tabindex="-1"></a>  port_mlflow             <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">port_mlflow</span></span>
<span id="cb122-6"><a href="root-module.html#cb122-6" aria-hidden="true" tabindex="-1"></a>  mlflow_s3_bucket_name   <span class="op">=</span> <span class="st">&quot;${var.name_prefix}-mlflow-bucket&quot;</span></span>
<span id="cb122-7"><a href="root-module.html#cb122-7" aria-hidden="true" tabindex="-1"></a>  force_destroy_s3_bucket <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb122-8"><a href="root-module.html#cb122-8" aria-hidden="true" tabindex="-1"></a>  storage_type            <span class="op">=</span> <span class="st">&quot;gp2&quot;</span></span>
<span id="cb122-9"><a href="root-module.html#cb122-9" aria-hidden="true" tabindex="-1"></a>  max_allocated_storage   <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">max_allocated_storage</span></span>
<span id="cb122-10"><a href="root-module.html#cb122-10" aria-hidden="true" tabindex="-1"></a>  airflow_github_ssh      <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">airflow_github_ssh</span></span>
<span id="cb122-11"><a href="root-module.html#cb122-11" aria-hidden="true" tabindex="-1"></a>  git_username            <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">git_username</span></span>
<span id="cb122-12"><a href="root-module.html#cb122-12" aria-hidden="true" tabindex="-1"></a>  git_token               <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">git_token</span></span>
<span id="cb122-13"><a href="root-module.html#cb122-13" aria-hidden="true" tabindex="-1"></a>  git_repository_url      <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">git_repository_url</span></span>
<span id="cb122-14"><a href="root-module.html#cb122-14" aria-hidden="true" tabindex="-1"></a>  git_branch              <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">git_branch</span></span>
<span id="cb122-15"><a href="root-module.html#cb122-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb122-16"><a href="root-module.html#cb122-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-17"><a href="root-module.html#cb122-17" aria-hidden="true" tabindex="-1"></a>data <span class="st">&quot;aws_caller_identity&quot;</span> <span class="st">&quot;current&quot;</span> {}</span>
<span id="cb122-18"><a href="root-module.html#cb122-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-19"><a href="root-module.html#cb122-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-20"><a href="root-module.html#cb122-20" aria-hidden="true" tabindex="-1"></a># INFRASTRUCTURE</span>
<span id="cb122-21"><a href="root-module.html#cb122-21" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;vpc&quot;</span> {</span>
<span id="cb122-22"><a href="root-module.html#cb122-22" aria-hidden="true" tabindex="-1"></a>  source       <span class="op">=</span> <span class="st">&quot;./infrastructure/vpc&quot;</span></span>
<span id="cb122-23"><a href="root-module.html#cb122-23" aria-hidden="true" tabindex="-1"></a>  cluster_name <span class="op">=</span> local<span class="op">.</span><span class="at">cluster_name</span></span>
<span id="cb122-24"><a href="root-module.html#cb122-24" aria-hidden="true" tabindex="-1"></a>  vpc_name     <span class="op">=</span> local<span class="op">.</span><span class="at">vpc_name</span></span>
<span id="cb122-25"><a href="root-module.html#cb122-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb122-26"><a href="root-module.html#cb122-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-27"><a href="root-module.html#cb122-27" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;eks&quot;</span> {</span>
<span id="cb122-28"><a href="root-module.html#cb122-28" aria-hidden="true" tabindex="-1"></a>  source                <span class="op">=</span> <span class="st">&quot;./infrastructure/eks&quot;</span></span>
<span id="cb122-29"><a href="root-module.html#cb122-29" aria-hidden="true" tabindex="-1"></a>  cluster_name          <span class="op">=</span> local<span class="op">.</span><span class="at">cluster_name</span></span>
<span id="cb122-30"><a href="root-module.html#cb122-30" aria-hidden="true" tabindex="-1"></a>  eks_cluster_version   <span class="op">=</span> <span class="st">&quot;1.23&quot;</span></span>
<span id="cb122-31"><a href="root-module.html#cb122-31" aria-hidden="true" tabindex="-1"></a>  vpc_id                <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">vpc_id</span></span>
<span id="cb122-32"><a href="root-module.html#cb122-32" aria-hidden="true" tabindex="-1"></a>  private_subnets       <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">private_subnets</span></span>
<span id="cb122-33"><a href="root-module.html#cb122-33" aria-hidden="true" tabindex="-1"></a>  security_group_id_one <span class="op">=</span> [module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">worker_group_mgmt_one_id</span>]</span>
<span id="cb122-34"><a href="root-module.html#cb122-34" aria-hidden="true" tabindex="-1"></a>  security_group_id_two <span class="op">=</span> [module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">worker_group_mgmt_two_id</span>]</span>
<span id="cb122-35"><a href="root-module.html#cb122-35" aria-hidden="true" tabindex="-1"></a>  depends_on <span class="op">=</span> [</span>
<span id="cb122-36"><a href="root-module.html#cb122-36" aria-hidden="true" tabindex="-1"></a>    module<span class="op">.</span><span class="at">vpc</span></span>
<span id="cb122-37"><a href="root-module.html#cb122-37" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb122-38"><a href="root-module.html#cb122-38" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb122-39"><a href="root-module.html#cb122-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-40"><a href="root-module.html#cb122-40" aria-hidden="true" tabindex="-1"></a># CUSTOM TOOLS</span>
<span id="cb122-41"><a href="root-module.html#cb122-41" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;airflow&quot;</span> {</span>
<span id="cb122-42"><a href="root-module.html#cb122-42" aria-hidden="true" tabindex="-1"></a>  count            <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">deploy_airflow</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">0</span></span>
<span id="cb122-43"><a href="root-module.html#cb122-43" aria-hidden="true" tabindex="-1"></a>  source           <span class="op">=</span> <span class="st">&quot;./modules/airflow&quot;</span></span>
<span id="cb122-44"><a href="root-module.html#cb122-44" aria-hidden="true" tabindex="-1"></a>  name             <span class="op">=</span> <span class="st">&quot;airflow&quot;</span></span>
<span id="cb122-45"><a href="root-module.html#cb122-45" aria-hidden="true" tabindex="-1"></a>  cluster_name     <span class="op">=</span> local<span class="op">.</span><span class="at">cluster_name</span></span>
<span id="cb122-46"><a href="root-module.html#cb122-46" aria-hidden="true" tabindex="-1"></a>  cluster_endpoint <span class="op">=</span> module<span class="op">.</span><span class="at">eks</span><span class="op">.</span><span class="at">cluster_endpoint</span></span>
<span id="cb122-47"><a href="root-module.html#cb122-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-48"><a href="root-module.html#cb122-48" aria-hidden="true" tabindex="-1"></a>  # RDS</span>
<span id="cb122-49"><a href="root-module.html#cb122-49" aria-hidden="true" tabindex="-1"></a>  vpc_id                      <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">vpc_id</span></span>
<span id="cb122-50"><a href="root-module.html#cb122-50" aria-hidden="true" tabindex="-1"></a>  private_subnets             <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">private_subnets</span></span>
<span id="cb122-51"><a href="root-module.html#cb122-51" aria-hidden="true" tabindex="-1"></a>  private_subnets_cidr_blocks <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">private_subnets_cidr_blocks</span></span>
<span id="cb122-52"><a href="root-module.html#cb122-52" aria-hidden="true" tabindex="-1"></a>  rds_port                    <span class="op">=</span> local<span class="op">.</span><span class="at">port_airflow</span></span>
<span id="cb122-53"><a href="root-module.html#cb122-53" aria-hidden="true" tabindex="-1"></a>  rds_name                    <span class="op">=</span> <span class="st">&quot;airflow&quot;</span></span>
<span id="cb122-54"><a href="root-module.html#cb122-54" aria-hidden="true" tabindex="-1"></a>  rds_engine                  <span class="op">=</span> <span class="st">&quot;postgres&quot;</span></span>
<span id="cb122-55"><a href="root-module.html#cb122-55" aria-hidden="true" tabindex="-1"></a>  rds_engine_version          <span class="op">=</span> <span class="st">&quot;13.3&quot;</span></span>
<span id="cb122-56"><a href="root-module.html#cb122-56" aria-hidden="true" tabindex="-1"></a>  rds_instance_class          <span class="op">=</span> <span class="st">&quot;db.t3.micro&quot;</span></span>
<span id="cb122-57"><a href="root-module.html#cb122-57" aria-hidden="true" tabindex="-1"></a>  storage_type                <span class="op">=</span> local<span class="op">.</span><span class="at">storage_type</span></span>
<span id="cb122-58"><a href="root-module.html#cb122-58" aria-hidden="true" tabindex="-1"></a>  max_allocated_storage       <span class="op">=</span> local<span class="op">.</span><span class="at">max_allocated_storage</span></span>
<span id="cb122-59"><a href="root-module.html#cb122-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-60"><a href="root-module.html#cb122-60" aria-hidden="true" tabindex="-1"></a>  # HELM</span>
<span id="cb122-61"><a href="root-module.html#cb122-61" aria-hidden="true" tabindex="-1"></a>  helm_chart_repository <span class="op">=</span> <span class="st">&quot;https://airflow-helm.github.io/charts&quot;</span></span>
<span id="cb122-62"><a href="root-module.html#cb122-62" aria-hidden="true" tabindex="-1"></a>  helm_chart_name       <span class="op">=</span> <span class="st">&quot;airflow&quot;</span></span>
<span id="cb122-63"><a href="root-module.html#cb122-63" aria-hidden="true" tabindex="-1"></a>  helm_chart_version    <span class="op">=</span> <span class="st">&quot;8.6.1&quot;</span></span>
<span id="cb122-64"><a href="root-module.html#cb122-64" aria-hidden="true" tabindex="-1"></a>  git_username          <span class="op">=</span> local<span class="op">.</span><span class="at">git_username</span></span>
<span id="cb122-65"><a href="root-module.html#cb122-65" aria-hidden="true" tabindex="-1"></a>  git_token             <span class="op">=</span> local<span class="op">.</span><span class="at">git_token</span></span>
<span id="cb122-66"><a href="root-module.html#cb122-66" aria-hidden="true" tabindex="-1"></a>  git_repository_url    <span class="op">=</span> local<span class="op">.</span><span class="at">git_repository_url</span></span>
<span id="cb122-67"><a href="root-module.html#cb122-67" aria-hidden="true" tabindex="-1"></a>  git_branch            <span class="op">=</span> local<span class="op">.</span><span class="at">git_branch</span></span>
<span id="cb122-68"><a href="root-module.html#cb122-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-69"><a href="root-module.html#cb122-69" aria-hidden="true" tabindex="-1"></a>  depends_on <span class="op">=</span> [</span>
<span id="cb122-70"><a href="root-module.html#cb122-70" aria-hidden="true" tabindex="-1"></a>    module<span class="op">.</span><span class="at">eks</span></span>
<span id="cb122-71"><a href="root-module.html#cb122-71" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb122-72"><a href="root-module.html#cb122-72" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb122-73"><a href="root-module.html#cb122-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-74"><a href="root-module.html#cb122-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-75"><a href="root-module.html#cb122-75" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;mlflow&quot;</span> {</span>
<span id="cb122-76"><a href="root-module.html#cb122-76" aria-hidden="true" tabindex="-1"></a>  count                 <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">deploy_mlflow</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">0</span></span>
<span id="cb122-77"><a href="root-module.html#cb122-77" aria-hidden="true" tabindex="-1"></a>  source                <span class="op">=</span> <span class="st">&quot;./modules/mlflow&quot;</span></span>
<span id="cb122-78"><a href="root-module.html#cb122-78" aria-hidden="true" tabindex="-1"></a>  name                  <span class="op">=</span> <span class="st">&quot;mlflow&quot;</span></span>
<span id="cb122-79"><a href="root-module.html#cb122-79" aria-hidden="true" tabindex="-1"></a>  mlflow_s3_bucket_name <span class="op">=</span> local<span class="op">.</span><span class="at">mlflow_s3_bucket_name</span></span>
<span id="cb122-80"><a href="root-module.html#cb122-80" aria-hidden="true" tabindex="-1"></a>  s3_force_destroy      <span class="op">=</span> local<span class="op">.</span><span class="at">force_destroy_s3_bucket</span></span>
<span id="cb122-81"><a href="root-module.html#cb122-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-82"><a href="root-module.html#cb122-82" aria-hidden="true" tabindex="-1"></a>  # RDS</span>
<span id="cb122-83"><a href="root-module.html#cb122-83" aria-hidden="true" tabindex="-1"></a>  vpc_id                      <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">vpc_id</span></span>
<span id="cb122-84"><a href="root-module.html#cb122-84" aria-hidden="true" tabindex="-1"></a>  private_subnets             <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">private_subnets</span></span>
<span id="cb122-85"><a href="root-module.html#cb122-85" aria-hidden="true" tabindex="-1"></a>  private_subnets_cidr_blocks <span class="op">=</span> module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">private_subnets_cidr_blocks</span></span>
<span id="cb122-86"><a href="root-module.html#cb122-86" aria-hidden="true" tabindex="-1"></a>  rds_port                    <span class="op">=</span> local<span class="op">.</span><span class="at">port_mlflow</span></span>
<span id="cb122-87"><a href="root-module.html#cb122-87" aria-hidden="true" tabindex="-1"></a>  rds_name                    <span class="op">=</span> <span class="st">&quot;mlflow&quot;</span></span>
<span id="cb122-88"><a href="root-module.html#cb122-88" aria-hidden="true" tabindex="-1"></a>  rds_engine                  <span class="op">=</span> <span class="st">&quot;mysql&quot;</span></span>
<span id="cb122-89"><a href="root-module.html#cb122-89" aria-hidden="true" tabindex="-1"></a>  rds_engine_version          <span class="op">=</span> <span class="st">&quot;8.0.30&quot;</span></span>
<span id="cb122-90"><a href="root-module.html#cb122-90" aria-hidden="true" tabindex="-1"></a>  rds_instance_class          <span class="op">=</span> <span class="st">&quot;db.t3.micro&quot;</span></span>
<span id="cb122-91"><a href="root-module.html#cb122-91" aria-hidden="true" tabindex="-1"></a>  storage_type                <span class="op">=</span> local<span class="op">.</span><span class="at">storage_type</span></span>
<span id="cb122-92"><a href="root-module.html#cb122-92" aria-hidden="true" tabindex="-1"></a>  max_allocated_storage       <span class="op">=</span> local<span class="op">.</span><span class="at">max_allocated_storage</span></span>
<span id="cb122-93"><a href="root-module.html#cb122-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-94"><a href="root-module.html#cb122-94" aria-hidden="true" tabindex="-1"></a>  depends_on <span class="op">=</span> [</span>
<span id="cb122-95"><a href="root-module.html#cb122-95" aria-hidden="true" tabindex="-1"></a>    module<span class="op">.</span><span class="at">eks</span></span>
<span id="cb122-96"><a href="root-module.html#cb122-96" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb122-97"><a href="root-module.html#cb122-97" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb122-98"><a href="root-module.html#cb122-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-99"><a href="root-module.html#cb122-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-100"><a href="root-module.html#cb122-100" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;jupyterhub&quot;</span> {</span>
<span id="cb122-101"><a href="root-module.html#cb122-101" aria-hidden="true" tabindex="-1"></a>  count            <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">deploy_jupyterhub</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">0</span></span>
<span id="cb122-102"><a href="root-module.html#cb122-102" aria-hidden="true" tabindex="-1"></a>  source           <span class="op">=</span> <span class="st">&quot;./modules/jupyterhub&quot;</span></span>
<span id="cb122-103"><a href="root-module.html#cb122-103" aria-hidden="true" tabindex="-1"></a>  name             <span class="op">=</span> <span class="st">&quot;jupyterhub&quot;</span></span>
<span id="cb122-104"><a href="root-module.html#cb122-104" aria-hidden="true" tabindex="-1"></a>  cluster_name     <span class="op">=</span> local<span class="op">.</span><span class="at">cluster_name</span></span>
<span id="cb122-105"><a href="root-module.html#cb122-105" aria-hidden="true" tabindex="-1"></a>  cluster_endpoint <span class="op">=</span> module<span class="op">.</span><span class="at">eks</span><span class="op">.</span><span class="at">cluster_endpoint</span></span>
<span id="cb122-106"><a href="root-module.html#cb122-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-107"><a href="root-module.html#cb122-107" aria-hidden="true" tabindex="-1"></a>  # HELM</span>
<span id="cb122-108"><a href="root-module.html#cb122-108" aria-hidden="true" tabindex="-1"></a>  helm_chart_repository <span class="op">=</span> <span class="st">&quot;https://jupyterhub.github.io/helm-chart/&quot;</span></span>
<span id="cb122-109"><a href="root-module.html#cb122-109" aria-hidden="true" tabindex="-1"></a>  helm_chart_name       <span class="op">=</span> <span class="st">&quot;jupyterhub&quot;</span></span>
<span id="cb122-110"><a href="root-module.html#cb122-110" aria-hidden="true" tabindex="-1"></a>  helm_chart_version    <span class="op">=</span> <span class="st">&quot;2.0.0&quot;</span></span>
<span id="cb122-111"><a href="root-module.html#cb122-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-112"><a href="root-module.html#cb122-112" aria-hidden="true" tabindex="-1"></a>  depends_on <span class="op">=</span> [</span>
<span id="cb122-113"><a href="root-module.html#cb122-113" aria-hidden="true" tabindex="-1"></a>    module<span class="op">.</span><span class="at">eks</span></span>
<span id="cb122-114"><a href="root-module.html#cb122-114" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb122-115"><a href="root-module.html#cb122-115" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="platform-deployment.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="infrastructure-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/seblum/kubernetes-training/edit/master/08.1-Deployment_Infrastructure_Root.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
