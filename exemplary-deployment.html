<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6.5 Exemplary Deployment | MLOps Engineering</title>
  <meta name="description" content="Implementing an MLOps infrastructure with Airflow and MLFlow utilizing K8s, Terraform, and GithubActions." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="6.5 Exemplary Deployment | MLOps Engineering" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Implementing an MLOps infrastructure with Airflow and MLFlow utilizing K8s, Terraform, and GithubActions." />
  <meta name="github-repo" content="seblum/mlops-engineering-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6.5 Exemplary Deployment | MLOps Engineering" />
  
  <meta name="twitter:description" content="Implementing an MLOps infrastructure with Airflow and MLFlow utilizing K8s, Terraform, and GithubActions." />
  

<meta name="author" content="Sebastian Blum" />


<meta name="date" content="2024-02-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="additional-tips-tricks.html"/>
<link rel="next" href="ml-platform-design.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MLOps Engineering</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html"><i class="fa fa-check"></i>Preamble</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="machine-learning-workflow.html"><a href="machine-learning-workflow.html"><i class="fa fa-check"></i><b>1.1</b> Machine Learning Workflow</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="machine-learning-workflow.html"><a href="machine-learning-workflow.html#ml-worflow-tools"><i class="fa fa-check"></i><b>1.1.1</b> ML Worflow Tools</a></li>
<li class="chapter" data-level="1.1.2" data-path="machine-learning-workflow.html"><a href="machine-learning-workflow.html#developing-machine-learning-models"><i class="fa fa-check"></i><b>1.1.2</b> Developing Machine Learning Models</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="machine-learning-operations-mlops.html"><a href="machine-learning-operations-mlops.html"><i class="fa fa-check"></i><b>1.2</b> Machine Learning Operations (MLOps)</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="machine-learning-operations-mlops.html"><a href="machine-learning-operations-mlops.html#ml-dev-ops"><i class="fa fa-check"></i><b>1.2.1</b> ML + (Dev)-Ops</a></li>
<li class="chapter" data-level="1.2.2" data-path="machine-learning-operations-mlops.html"><a href="machine-learning-operations-mlops.html#mlops-lifecycle"><i class="fa fa-check"></i><b>1.2.2</b> MLOps Lifecycle</a></li>
<li class="chapter" data-level="1.2.3" data-path="machine-learning-operations-mlops.html"><a href="machine-learning-operations-mlops.html#mlops-engineering"><i class="fa fa-check"></i><b>1.2.3</b> MLOps Engineering</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html"><i class="fa fa-check"></i><b>1.3</b> Roles and Tasks in MLOps</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#data-engineer"><i class="fa fa-check"></i><b>1.3.1</b> Data Engineer</a></li>
<li class="chapter" data-level="1.3.2" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#data-scientist"><i class="fa fa-check"></i><b>1.3.2</b> Data Scientist</a></li>
<li class="chapter" data-level="1.3.3" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#ml-engineer"><i class="fa fa-check"></i><b>1.3.3</b> ML Engineer</a></li>
<li class="chapter" data-level="1.3.4" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#mlops-engineer"><i class="fa fa-check"></i><b>1.3.4</b> MLOps Engineer</a></li>
<li class="chapter" data-level="1.3.5" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#devops-engineer"><i class="fa fa-check"></i><b>1.3.5</b> DevOps Engineer</a></li>
<li class="chapter" data-level="1.3.6" data-path="roles-and-tasks-in-mlops.html"><a href="roles-and-tasks-in-mlops.html#additional-roles-function"><i class="fa fa-check"></i><b>1.3.6</b> Additional roles &amp; function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ops-tools-and-principles.html"><a href="ops-tools-and-principles.html"><i class="fa fa-check"></i><b>2</b> Ops Tools and Principles</a>
<ul>
<li class="chapter" data-level="2.1" data-path="containerization.html"><a href="containerization.html"><i class="fa fa-check"></i><b>2.1</b> Containerization</a></li>
<li class="chapter" data-level="2.2" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i><b>2.2</b> Version Control</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="version-control.html"><a href="version-control.html#github"><i class="fa fa-check"></i><b>2.2.1</b> Github</a></li>
<li class="chapter" data-level="2.2.2" data-path="version-control.html"><a href="version-control.html#git-lifecycle"><i class="fa fa-check"></i><b>2.2.2</b> Git lifecycle</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="cicd.html"><a href="cicd.html"><i class="fa fa-check"></i><b>2.3</b> CI/CD</a>
<ul>
<li class="chapter" data-level="" data-path="cicd.html"><a href="cicd.html#github-actions"><i class="fa fa-check"></i>Github Actions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="infrastructure-as-code.html"><a href="infrastructure-as-code.html"><i class="fa fa-check"></i><b>2.4</b> Infrastructure as code</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="airflow.html"><a href="airflow.html"><i class="fa fa-check"></i><b>3</b> Airflow</a>
<ul>
<li class="chapter" data-level="3.1" data-path="core-components.html"><a href="core-components.html"><i class="fa fa-check"></i><b>3.1</b> Core Components</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="core-components.html"><a href="core-components.html#dags"><i class="fa fa-check"></i><b>3.1.1</b> DAGs</a></li>
<li class="chapter" data-level="3.1.2" data-path="core-components.html"><a href="core-components.html#operators"><i class="fa fa-check"></i><b>3.1.2</b> Operators</a></li>
<li class="chapter" data-level="3.1.3" data-path="core-components.html"><a href="core-components.html#tasks"><i class="fa fa-check"></i><b>3.1.3</b> Tasks</a></li>
<li class="chapter" data-level="3.1.4" data-path="core-components.html"><a href="core-components.html#xcom"><i class="fa fa-check"></i><b>3.1.4</b> XCom</a></li>
<li class="chapter" data-level="3.1.5" data-path="core-components.html"><a href="core-components.html#scheduling"><i class="fa fa-check"></i><b>3.1.5</b> Scheduling</a></li>
<li class="chapter" data-level="3.1.6" data-path="core-components.html"><a href="core-components.html#taskflow"><i class="fa fa-check"></i><b>3.1.6</b> Taskflow</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="exemplary-ml-workflow.html"><a href="exemplary-ml-workflow.html"><i class="fa fa-check"></i><b>3.2</b> Exemplary ML workflow</a></li>
<li class="chapter" data-level="3.3" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html"><i class="fa fa-check"></i><b>3.3</b> Airflow infrastructure</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#airflow-as-a-distributed-system"><i class="fa fa-check"></i><b>3.3.1</b> Airflow as a distributed system</a></li>
<li class="chapter" data-level="3.3.2" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#scheduler"><i class="fa fa-check"></i><b>3.3.2</b> Scheduler</a></li>
<li class="chapter" data-level="3.3.3" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#webserver"><i class="fa fa-check"></i><b>3.3.3</b> Webserver</a></li>
<li class="chapter" data-level="3.3.4" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#executor"><i class="fa fa-check"></i><b>3.3.4</b> Executor</a></li>
<li class="chapter" data-level="3.3.5" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#dag-directory"><i class="fa fa-check"></i><b>3.3.5</b> DAG Directory</a></li>
<li class="chapter" data-level="3.3.6" data-path="airflow-infrastructure.html"><a href="airflow-infrastructure.html#metadata-database"><i class="fa fa-check"></i><b>3.3.6</b> Metadata Database</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mlflow.html"><a href="mlflow.html"><i class="fa fa-check"></i><b>4</b> MLflow</a>
<ul>
<li class="chapter" data-level="4.1" data-path="core-components-1.html"><a href="core-components-1.html"><i class="fa fa-check"></i><b>4.1</b> Core Components</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="core-components-1.html"><a href="core-components-1.html#mlflow-tracking"><i class="fa fa-check"></i><b>4.1.1</b> MLflow Tracking</a></li>
<li class="chapter" data-level="4.1.2" data-path="core-components-1.html"><a href="core-components-1.html#mlflow-models"><i class="fa fa-check"></i><b>4.1.2</b> MLflow Models</a></li>
<li class="chapter" data-level="4.1.3" data-path="core-components-1.html"><a href="core-components-1.html#mlflow-model-registry"><i class="fa fa-check"></i><b>4.1.3</b> MLflow Model Registry</a></li>
<li class="chapter" data-level="4.1.4" data-path="core-components-1.html"><a href="core-components-1.html#mlflow-projects"><i class="fa fa-check"></i><b>4.1.4</b> MLflow Projects</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="mlfflow-architecture.html"><a href="mlfflow-architecture.html"><i class="fa fa-check"></i><b>4.2</b> MLFflow Architecture</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="mlfflow-architecture.html"><a href="mlfflow-architecture.html#mlflow-tracking-server"><i class="fa fa-check"></i><b>4.2.1</b> MLflow Tracking Server</a></li>
<li class="chapter" data-level="4.2.2" data-path="mlfflow-architecture.html"><a href="mlfflow-architecture.html#mlflow-backend-store"><i class="fa fa-check"></i><b>4.2.2</b> MLflow Backend Store</a></li>
<li class="chapter" data-level="4.2.3" data-path="mlfflow-architecture.html"><a href="mlfflow-architecture.html#mlflow-artifact-store"><i class="fa fa-check"></i><b>4.2.3</b> MLflow Artifact Store</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="kubernetes.html"><a href="kubernetes.html"><i class="fa fa-check"></i><b>5</b> Kubernetes</a>
<ul>
<li class="chapter" data-level="5.1" data-path="core-components-2.html"><a href="core-components-2.html"><i class="fa fa-check"></i><b>5.1</b> Core Components</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="core-components-2.html"><a href="core-components-2.html#nodes"><i class="fa fa-check"></i><b>5.1.1</b> Nodes</a></li>
<li class="chapter" data-level="5.1.2" data-path="core-components-2.html"><a href="core-components-2.html#pods"><i class="fa fa-check"></i><b>5.1.2</b> Pods</a></li>
<li class="chapter" data-level="5.1.3" data-path="core-components-2.html"><a href="core-components-2.html#imperative-declarative-management"><i class="fa fa-check"></i><b>5.1.3</b> Imperative &amp; Declarative Management</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="application-deployment-design.html"><a href="application-deployment-design.html"><i class="fa fa-check"></i><b>5.2</b> Application Deployment &amp; Design</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="application-deployment-design.html"><a href="application-deployment-design.html#deployments"><i class="fa fa-check"></i><b>5.2.1</b> Deployments</a></li>
<li class="chapter" data-level="5.2.2" data-path="application-deployment-design.html"><a href="application-deployment-design.html#resource-management"><i class="fa fa-check"></i><b>5.2.2</b> Resource Management</a></li>
<li class="chapter" data-level="5.2.3" data-path="application-deployment-design.html"><a href="application-deployment-design.html#daemonsets"><i class="fa fa-check"></i><b>5.2.3</b> DaemonSets</a></li>
<li class="chapter" data-level="5.2.4" data-path="application-deployment-design.html"><a href="application-deployment-design.html#statefulsets"><i class="fa fa-check"></i><b>5.2.4</b> StatefulSets</a></li>
<li class="chapter" data-level="5.2.5" data-path="application-deployment-design.html"><a href="application-deployment-design.html#jobs-cron-jobs"><i class="fa fa-check"></i><b>5.2.5</b> Jobs &amp; Cron Jobs</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="services-and-networking.html"><a href="services-and-networking.html"><i class="fa fa-check"></i><b>5.3</b> Services and Networking</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="services-and-networking.html"><a href="services-and-networking.html#services"><i class="fa fa-check"></i><b>5.3.1</b> Services</a></li>
<li class="chapter" data-level="5.3.2" data-path="services-and-networking.html"><a href="services-and-networking.html#service-discovery"><i class="fa fa-check"></i><b>5.3.2</b> Service Discovery</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="volumes-and-storage.html"><a href="volumes-and-storage.html"><i class="fa fa-check"></i><b>5.4</b> Volumes and Storage</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="volumes-and-storage.html"><a href="volumes-and-storage.html#emptydir-volume"><i class="fa fa-check"></i><b>5.4.1</b> EmptyDir Volume</a></li>
<li class="chapter" data-level="5.4.2" data-path="volumes-and-storage.html"><a href="volumes-and-storage.html#hostpath-volume"><i class="fa fa-check"></i><b>5.4.2</b> HostPath Volume</a></li>
<li class="chapter" data-level="5.4.3" data-path="volumes-and-storage.html"><a href="volumes-and-storage.html#persistent-volumes"><i class="fa fa-check"></i><b>5.4.3</b> Persistent Volumes</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html"><i class="fa fa-check"></i><b>5.5</b> Environment, Configuration &amp; Security</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html#namespaces"><i class="fa fa-check"></i><b>5.5.1</b> Namespaces</a></li>
<li class="chapter" data-level="5.5.2" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html#labels-selectors-and-annotations"><i class="fa fa-check"></i><b>5.5.2</b> Labels, Selectors and Annotations</a></li>
<li class="chapter" data-level="5.5.3" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html#configmaps"><i class="fa fa-check"></i><b>5.5.3</b> ConfigMaps</a></li>
<li class="chapter" data-level="5.5.4" data-path="environment-configuration-security.html"><a href="environment-configuration-security.html#secrets"><i class="fa fa-check"></i><b>5.5.4</b> Secrets</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="observability-maintenance.html"><a href="observability-maintenance.html"><i class="fa fa-check"></i><b>5.6</b> Observability &amp; Maintenance</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="observability-maintenance.html"><a href="observability-maintenance.html#health-checks"><i class="fa fa-check"></i><b>5.6.1</b> Health Checks</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="helm.html"><a href="helm.html"><i class="fa fa-check"></i><b>5.7</b> Helm</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="helm.html"><a href="helm.html#helm-chart-structure"><i class="fa fa-check"></i><b>5.7.1</b> Helm Chart Structure</a></li>
<li class="chapter" data-level="5.7.2" data-path="helm.html"><a href="helm.html#working-with-helm"><i class="fa fa-check"></i><b>5.7.2</b> Working with Helm</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="terraform.html"><a href="terraform.html"><i class="fa fa-check"></i><b>6</b> Terraform</a>
<ul>
<li class="chapter" data-level="6.1" data-path="basic-usage.html"><a href="basic-usage.html"><i class="fa fa-check"></i><b>6.1</b> Basic usage</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="basic-usage.html"><a href="basic-usage.html#terraform-init"><i class="fa fa-check"></i><b>6.1.1</b> terraform init</a></li>
<li class="chapter" data-level="6.1.2" data-path="basic-usage.html"><a href="basic-usage.html#terraform-validate"><i class="fa fa-check"></i><b>6.1.2</b> terraform validate</a></li>
<li class="chapter" data-level="6.1.3" data-path="basic-usage.html"><a href="basic-usage.html#terraform-plan"><i class="fa fa-check"></i><b>6.1.3</b> terraform plan</a></li>
<li class="chapter" data-level="6.1.4" data-path="basic-usage.html"><a href="basic-usage.html#terraform-apply"><i class="fa fa-check"></i><b>6.1.4</b> terraform apply</a></li>
<li class="chapter" data-level="6.1.5" data-path="basic-usage.html"><a href="basic-usage.html#terraform-destroy"><i class="fa fa-check"></i><b>6.1.5</b> terraform destroy</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="core-components-3.html"><a href="core-components-3.html"><i class="fa fa-check"></i><b>6.2</b> Core Components</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="core-components-3.html"><a href="core-components-3.html#providers"><i class="fa fa-check"></i><b>6.2.1</b> Providers</a></li>
<li class="chapter" data-level="6.2.2" data-path="core-components-3.html"><a href="core-components-3.html#resources"><i class="fa fa-check"></i><b>6.2.2</b> Resources</a></li>
<li class="chapter" data-level="6.2.3" data-path="core-components-3.html"><a href="core-components-3.html#data-sources"><i class="fa fa-check"></i><b>6.2.3</b> Data Sources</a></li>
<li class="chapter" data-level="6.2.4" data-path="core-components-3.html"><a href="core-components-3.html#state"><i class="fa fa-check"></i><b>6.2.4</b> State</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="modules.html"><a href="modules.html"><i class="fa fa-check"></i><b>6.3</b> Modules</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="modules.html"><a href="modules.html#input-variables"><i class="fa fa-check"></i><b>6.3.1</b> Input Variables</a></li>
<li class="chapter" data-level="6.3.2" data-path="modules.html"><a href="modules.html#output-variables"><i class="fa fa-check"></i><b>6.3.2</b> Output Variables</a></li>
<li class="chapter" data-level="6.3.3" data-path="modules.html"><a href="modules.html#local-variables"><i class="fa fa-check"></i><b>6.3.3</b> Local Variables</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html"><i class="fa fa-check"></i><b>6.4</b> Additional tips &amp; tricks</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html#count"><i class="fa fa-check"></i><b>6.4.1</b> count</a></li>
<li class="chapter" data-level="6.4.2" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html#for-each"><i class="fa fa-check"></i><b>6.4.2</b> for-each</a></li>
<li class="chapter" data-level="6.4.3" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html#for"><i class="fa fa-check"></i><b>6.4.3</b> for</a></li>
<li class="chapter" data-level="6.4.4" data-path="additional-tips-tricks.html"><a href="additional-tips-tricks.html#workspaces"><i class="fa fa-check"></i><b>6.4.4</b> Workspaces</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="exemplary-deployment.html"><a href="exemplary-deployment.html"><i class="fa fa-check"></i><b>6.5</b> Exemplary Deployment</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="exemplary-deployment.html"><a href="exemplary-deployment.html#root"><i class="fa fa-check"></i><b>6.5.1</b> root</a></li>
<li class="chapter" data-level="6.5.2" data-path="exemplary-deployment.html"><a href="exemplary-deployment.html#vpc"><i class="fa fa-check"></i><b>6.5.2</b> vpc</a></li>
<li class="chapter" data-level="6.5.3" data-path="exemplary-deployment.html"><a href="exemplary-deployment.html#run-the-code"><i class="fa fa-check"></i><b>6.5.3</b> Run the code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ml-platform-design.html"><a href="ml-platform-design.html"><i class="fa fa-check"></i><b>7</b> ML Platform Design</a>
<ul>
<li class="chapter" data-level="" data-path="ml-platform-design.html"><a href="ml-platform-design.html#overview"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="" data-path="ml-platform-design.html"><a href="ml-platform-design.html#infrastructure"><i class="fa fa-check"></i>Infrastructure</a></li>
<li class="chapter" data-level="" data-path="ml-platform-design.html"><a href="ml-platform-design.html#mlops-tools"><i class="fa fa-check"></i>MLOps Tools</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="platform-deployment.html"><a href="platform-deployment.html"><i class="fa fa-check"></i><b>8</b> Platform Deployment</a>
<ul>
<li class="chapter" data-level="8.1" data-path="root-module.html"><a href="root-module.html"><i class="fa fa-check"></i><b>8.1</b> Root module</a></li>
<li class="chapter" data-level="8.2" data-path="infrastructure-2.html"><a href="infrastructure-2.html"><i class="fa fa-check"></i><b>8.2</b> Infrastructure</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="infrastructure-2.html"><a href="infrastructure-2.html#virtual-private-cloud"><i class="fa fa-check"></i><b>8.2.1</b> Virtual Private Cloud</a></li>
<li class="chapter" data-level="8.2.2" data-path="infrastructure-2.html"><a href="infrastructure-2.html#elastic-kubernetes-service"><i class="fa fa-check"></i><b>8.2.2</b> Elastic Kubernetes Service</a></li>
<li class="chapter" data-level="8.2.3" data-path="infrastructure-2.html"><a href="infrastructure-2.html#networking"><i class="fa fa-check"></i><b>8.2.3</b> Networking</a></li>
<li class="chapter" data-level="8.2.4" data-path="infrastructure-2.html"><a href="infrastructure-2.html#relational-database-service"><i class="fa fa-check"></i><b>8.2.4</b> Relational Database Service</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="components.html"><a href="components.html"><i class="fa fa-check"></i><b>8.3</b> Components</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="components.html"><a href="components.html#user-profiles"><i class="fa fa-check"></i><b>8.3.1</b> User Profiles</a></li>
<li class="chapter" data-level="8.3.2" data-path="components.html"><a href="components.html#airflow-1"><i class="fa fa-check"></i><b>8.3.2</b> Airflow</a></li>
<li class="chapter" data-level="8.3.3" data-path="components.html"><a href="components.html#mlflow-1"><i class="fa fa-check"></i><b>8.3.3</b> Mlflow</a></li>
<li class="chapter" data-level="8.3.4" data-path="components.html"><a href="components.html#jupyterhub"><i class="fa fa-check"></i><b>8.3.4</b> Jupyterhub</a></li>
<li class="chapter" data-level="8.3.5" data-path="components.html"><a href="components.html#monitoring"><i class="fa fa-check"></i><b>8.3.5</b> Monitoring</a></li>
<li class="chapter" data-level="8.3.6" data-path="components.html"><a href="components.html#sagemaker"><i class="fa fa-check"></i><b>8.3.6</b> Sagemaker</a></li>
<li class="chapter" data-level="8.3.7" data-path="components.html"><a href="components.html#dashboard"><i class="fa fa-check"></i><b>8.3.7</b> Dashboard</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="design-decisions.html"><a href="design-decisions.html"><i class="fa fa-check"></i><b>8.4</b> Design Decisions</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="use-case-development.html"><a href="use-case-development.html"><i class="fa fa-check"></i><b>9</b> Use Case Development</a>
<ul>
<li class="chapter" data-level="9.1" data-path="integrated-development-environment-1.html"><a href="integrated-development-environment-1.html"><i class="fa fa-check"></i><b>9.1</b> Integrated Development Environment</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="integrated-development-environment-1.html"><a href="integrated-development-environment-1.html#github-repository"><i class="fa fa-check"></i><b>9.1.1</b> Github Repository</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="training-deployment-pipeline-workflow.html"><a href="training-deployment-pipeline-workflow.html"><i class="fa fa-check"></i><b>9.2</b> Training &amp; Deployment Pipeline Workflow</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="training-deployment-pipeline-workflow.html"><a href="training-deployment-pipeline-workflow.html#airflow-workflow"><i class="fa fa-check"></i><b>9.2.1</b> Airflow Workflow</a></li>
<li class="chapter" data-level="9.2.2" data-path="training-deployment-pipeline-workflow.html"><a href="training-deployment-pipeline-workflow.html#mlflow-integration"><i class="fa fa-check"></i><b>9.2.2</b> MLflow integration</a></li>
<li class="chapter" data-level="9.2.3" data-path="training-deployment-pipeline-workflow.html"><a href="training-deployment-pipeline-workflow.html#pipeline-workflow"><i class="fa fa-check"></i><b>9.2.3</b> Pipeline Workflow</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="pipeline-workflow-steps.html"><a href="pipeline-workflow-steps.html"><i class="fa fa-check"></i><b>9.3</b> Pipeline Workflow Steps</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="pipeline-workflow-steps.html"><a href="pipeline-workflow-steps.html#data-preprocessing"><i class="fa fa-check"></i><b>9.3.1</b> Data Preprocessing</a></li>
<li class="chapter" data-level="9.3.2" data-path="pipeline-workflow-steps.html"><a href="pipeline-workflow-steps.html#model-training"><i class="fa fa-check"></i><b>9.3.2</b> Model Training</a></li>
<li class="chapter" data-level="9.3.3" data-path="pipeline-workflow-steps.html"><a href="pipeline-workflow-steps.html#model-comparison"><i class="fa fa-check"></i><b>9.3.3</b> Model Comparison</a></li>
<li class="chapter" data-level="9.3.4" data-path="pipeline-workflow-steps.html"><a href="pipeline-workflow-steps.html#model-deployment-serving"><i class="fa fa-check"></i><b>9.3.4</b> Model Deployment &amp; Serving</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="model-inferencing.html"><a href="model-inferencing.html"><i class="fa fa-check"></i><b>9.4</b> Model Inferencing</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="model-inferencing.html"><a href="model-inferencing.html#pipeline-workflow-1"><i class="fa fa-check"></i><b>9.4.1</b> Pipeline Workflow</a></li>
<li class="chapter" data-level="9.4.2" data-path="model-inferencing.html"><a href="model-inferencing.html#inference-workflow-code"><i class="fa fa-check"></i><b>9.4.2</b> Inference Workflow Code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="contributing.html"><a href="contributing.html"><i class="fa fa-check"></i>Contributing</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">MLOps Engineering</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exemplary-deployment" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Exemplary Deployment<a href="exemplary-deployment.html#exemplary-deployment" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Configuring NGINX on Amazon EC2 Instances Using Terraform</strong></p>
<p>In this final exemplary Terraform deployment, we aim to establish our cloud infrastructure on AWS as done in the previous subsections. This infrastructure comprises an AWS Virtual Private Cloud (VPC) housing EC2 instances, upon which NGINX will be deployed. The structural arrangement is as follows:</p>
<p>We employ two distinct modules: the <code>"root"</code> module and the <code>"vpc"</code> module. The <code>"root"</code> module is responsible for orchestrating all other modules, respectively the <code>"vpc"</code> module, alongside integrating all further resources, such as for example <code>ec2_instances</code>. The ultimate goal is to have NGINX efficiently operational on these EC2 instances within the provisioned AWS VPC.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb108-1"><a href="exemplary-deployment.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="ex">root</span></span>
<span id="cb108-2"><a href="exemplary-deployment.html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   main.tf</span>
<span id="cb108-3"><a href="exemplary-deployment.html#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   variables.tf</span>
<span id="cb108-4"><a href="exemplary-deployment.html#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   outputs.tf</span>
<span id="cb108-5"><a href="exemplary-deployment.html#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   providers.tf</span>
<span id="cb108-6"><a href="exemplary-deployment.html#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   userdata.tpl</span>
<span id="cb108-7"><a href="exemplary-deployment.html#cb108-7" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   terraform.pem <span class="co"># (to be created in the aws console)</span></span>
<span id="cb108-8"><a href="exemplary-deployment.html#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span></span>
<span id="cb108-9"><a href="exemplary-deployment.html#cb108-9" aria-hidden="true" tabindex="-1"></a><span class="ex">└──</span> vpc</span>
<span id="cb108-10"><a href="exemplary-deployment.html#cb108-10" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   │   main.tf</span>
<span id="cb108-11"><a href="exemplary-deployment.html#cb108-11" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   │   variables.tf</span>
<span id="cb108-12"><a href="exemplary-deployment.html#cb108-12" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   │   outputs.tf</span></code></pre></div>
<p>Before executing the provided Terraform script, it’s necessary to first create an AWS key pair (pem file) with the specific name <code>terraform.pem</code> within the AWS Management Console. This key pair will be instrumental for SSH access to the EC2 instances that the script is designed to provision. To accomplish this, log in to your AWS account via the AWS Management Console, navigate to the EC2 service, and then locate the “Key Pairs” section under “Network &amp; Security” in the EC2 dashboard. Click on the “Create Key Pair” button and assign the name <code>terraform</code> to your key pair. Once created, a <code>.pem</code> file will be generated and automatically downloaded to your computer. Ensure you save this file in a secure location, as it will be used for accessing the EC2 instances. With the <code>terraform.pem</code> file prepared, you can proceed to run the Terraform script, ensuring that the file resides in the same directory where you intend to execute the Terraform commands.</p>
<div id="root" class="section level3 hasAnchor" number="6.5.1">
<h3><span class="header-section-number">6.5.1</span> root<a href="exemplary-deployment.html#root" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this Tutorial, the term <em>root</em> designates the highest-level directory within the codebase, wherein crucial components such as primary modules, provider configurations, and terraform.tfvars variables are typically established.</p>
<div id="main.tf" class="section level4 hasAnchor" number="6.5.1.1">
<h4><span class="header-section-number">6.5.1.1</span> main.tf<a href="exemplary-deployment.html#main.tf" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>main.tf</code> defines the main code for deploying an AWS EC2 instance and related resources. First, it collects data about the latest AWS Ubuntu Amazon Machine Image (AMI) with a specific name pattern using the <code>aws_ami</code> data source. This image will be used as the base for EC2 instances.</p>
<p>It deploys an EC2 instance using the <code>"terraform-aws-modules/ec2-instance/aws"</code> module, specifying various parameters such as the AMI ID obtained from the data source, instance type <code>t2.micro</code>, the security group we create with the <code>vpc</code> module, the SSH <code>key_name</code> we created within the AWS console, and <code>userdata.tpl</code> script which installed ngnix on the instance.</p>
<p>On the bottom of the code, the <code>vpc</code> module is deployed using a custom module located in the <code>"./vpc"</code> directory, with a specified security group name. As mentioned earlier, EC2 instance is associated with this security group for network access control. As the EC2 instance is dependent on the security group, the <code>vpc</code> module will be created before the <code>ec2_instance</code>, even if the code is specified afterward.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb109-1"><a href="exemplary-deployment.html#cb109-1" aria-hidden="true" tabindex="-1"></a># DATA</span>
<span id="cb109-2"><a href="exemplary-deployment.html#cb109-2" aria-hidden="true" tabindex="-1"></a>data <span class="st">&quot;aws_ami&quot;</span> <span class="st">&quot;aws_ubuntu&quot;</span> {</span>
<span id="cb109-3"><a href="exemplary-deployment.html#cb109-3" aria-hidden="true" tabindex="-1"></a>  most_recent <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb109-4"><a href="exemplary-deployment.html#cb109-4" aria-hidden="true" tabindex="-1"></a>  owners      <span class="op">=</span> [<span class="st">&quot;amazon&quot;</span>]</span>
<span id="cb109-5"><a href="exemplary-deployment.html#cb109-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-6"><a href="exemplary-deployment.html#cb109-6" aria-hidden="true" tabindex="-1"></a>  filter {</span>
<span id="cb109-7"><a href="exemplary-deployment.html#cb109-7" aria-hidden="true" tabindex="-1"></a>        name <span class="op">=</span> <span class="st">&quot;name&quot;</span></span>
<span id="cb109-8"><a href="exemplary-deployment.html#cb109-8" aria-hidden="true" tabindex="-1"></a>        values <span class="op">=</span> [<span class="st">&quot;ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*&quot;</span>]</span>
<span id="cb109-9"><a href="exemplary-deployment.html#cb109-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb109-10"><a href="exemplary-deployment.html#cb109-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-11"><a href="exemplary-deployment.html#cb109-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb109-12"><a href="exemplary-deployment.html#cb109-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-13"><a href="exemplary-deployment.html#cb109-13" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;ec2_instances&quot;</span> {</span>
<span id="cb109-14"><a href="exemplary-deployment.html#cb109-14" aria-hidden="true" tabindex="-1"></a>  source  <span class="op">=</span> <span class="st">&quot;terraform-aws-modules/ec2-instance/aws&quot;</span></span>
<span id="cb109-15"><a href="exemplary-deployment.html#cb109-15" aria-hidden="true" tabindex="-1"></a>  version <span class="op">=</span> <span class="st">&quot;3.5.0&quot;</span></span>
<span id="cb109-16"><a href="exemplary-deployment.html#cb109-16" aria-hidden="true" tabindex="-1"></a>  count   <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb109-17"><a href="exemplary-deployment.html#cb109-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-18"><a href="exemplary-deployment.html#cb109-18" aria-hidden="true" tabindex="-1"></a>  name <span class="op">=</span> <span class="st">&quot;ec2-nginx-demo&quot;</span></span>
<span id="cb109-19"><a href="exemplary-deployment.html#cb109-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-20"><a href="exemplary-deployment.html#cb109-20" aria-hidden="true" tabindex="-1"></a>  ami                    <span class="op">=</span> data<span class="op">.</span><span class="at">aws_ami</span><span class="op">.</span><span class="at">aws_ubuntu</span><span class="op">.</span><span class="at">id</span></span>
<span id="cb109-21"><a href="exemplary-deployment.html#cb109-21" aria-hidden="true" tabindex="-1"></a>  instance_type          <span class="op">=</span> <span class="st">&quot;t2.micro&quot;</span></span>
<span id="cb109-22"><a href="exemplary-deployment.html#cb109-22" aria-hidden="true" tabindex="-1"></a>  vpc_security_group_ids <span class="op">=</span> [module<span class="op">.</span><span class="at">vpc</span><span class="op">.</span><span class="at">aws_security_group_id</span>]</span>
<span id="cb109-23"><a href="exemplary-deployment.html#cb109-23" aria-hidden="true" tabindex="-1"></a>  key_name               <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">pem_key_name</span></span>
<span id="cb109-24"><a href="exemplary-deployment.html#cb109-24" aria-hidden="true" tabindex="-1"></a>  user_data              <span class="op">=</span> <span class="fu">file</span>(<span class="st">&quot;userdata.tpl&quot;</span>)</span>
<span id="cb109-25"><a href="exemplary-deployment.html#cb109-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-26"><a href="exemplary-deployment.html#cb109-26" aria-hidden="true" tabindex="-1"></a>  tags <span class="op">=</span> {</span>
<span id="cb109-27"><a href="exemplary-deployment.html#cb109-27" aria-hidden="true" tabindex="-1"></a>    Name <span class="op">=</span> <span class="st">&quot;NginxDemo&quot;</span></span>
<span id="cb109-28"><a href="exemplary-deployment.html#cb109-28" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb109-29"><a href="exemplary-deployment.html#cb109-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb109-30"><a href="exemplary-deployment.html#cb109-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-31"><a href="exemplary-deployment.html#cb109-31" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;vpc&quot;</span> {</span>
<span id="cb109-32"><a href="exemplary-deployment.html#cb109-32" aria-hidden="true" tabindex="-1"></a>  source              <span class="op">=</span> <span class="st">&quot;./vpc&quot;</span></span>
<span id="cb109-33"><a href="exemplary-deployment.html#cb109-33" aria-hidden="true" tabindex="-1"></a>  security_group_name <span class="op">=</span> <span class="st">&quot;demo_sg&quot;</span></span>
<span id="cb109-34"><a href="exemplary-deployment.html#cb109-34" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="outputs.tf" class="section level4 hasAnchor" number="6.5.1.2">
<h4><span class="header-section-number">6.5.1.2</span> outputs.tf<a href="exemplary-deployment.html#outputs.tf" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>outputs.tf</code> file defines an output named <code>"aws_instance_public_dns"</code> that captures and makes accessible the public DNS of the first EC2 instance created using the <code>"ec2_instances"</code> module.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb110-1"><a href="exemplary-deployment.html#cb110-1" aria-hidden="true" tabindex="-1"></a>output <span class="st">&quot;aws_instance_public_dns&quot;</span> {</span>
<span id="cb110-2"><a href="exemplary-deployment.html#cb110-2" aria-hidden="true" tabindex="-1"></a>  value <span class="op">=</span> module<span class="op">.</span><span class="at">ec2_instances</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">public_dns</span></span>
<span id="cb110-3"><a href="exemplary-deployment.html#cb110-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="providers.tf" class="section level4 hasAnchor" number="6.5.1.3">
<h4><span class="header-section-number">6.5.1.3</span> providers.tf<a href="exemplary-deployment.html#providers.tf" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>providers.tf</code> establishes an AWS provider configuration where the <code>"aws"</code> provider is defined with the AWS region specified by <code>"var.region"</code>. This region configuration ensures that subsequent AWS resources and modules defined in the Terraform configuration will be created within the specified AWS region.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb111-1"><a href="exemplary-deployment.html#cb111-1" aria-hidden="true" tabindex="-1"></a># Provider</span>
<span id="cb111-2"><a href="exemplary-deployment.html#cb111-2" aria-hidden="true" tabindex="-1"></a>provider <span class="st">&quot;aws&quot;</span> {</span>
<span id="cb111-3"><a href="exemplary-deployment.html#cb111-3" aria-hidden="true" tabindex="-1"></a>  region <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">region</span></span>
<span id="cb111-4"><a href="exemplary-deployment.html#cb111-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="terraform.tfvars" class="section level4 hasAnchor" number="6.5.1.4">
<h4><span class="header-section-number">6.5.1.4</span> terraform.tfvars<a href="exemplary-deployment.html#terraform.tfvars" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The input provided in the <code>terraform.tfvars</code> file sets the value of the variable <code>"pem_key_name"</code>. This configuration file is used to assign specific values to variables defined in the Terraform configuration.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb112-1"><a href="exemplary-deployment.html#cb112-1" aria-hidden="true" tabindex="-1"></a>pem_key_name <span class="op">=</span> <span class="st">&quot;terraform&quot;</span></span></code></pre></div>
</div>
<div id="variables.tf" class="section level4 hasAnchor" number="6.5.1.5">
<h4><span class="header-section-number">6.5.1.5</span> variables.tf<a href="exemplary-deployment.html#variables.tf" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>variables.tf</code> defines two variables: <code>"pem_key_name"</code> and <code>"region"</code>. The <code>"pem_key_name"</code> variable is intended for specifying the name of an AWS PEM key within the AWS console and is of string data type. Meanwhile, the <code>"region"</code> variable is designed for specifying the AWS region and has a default value set to a default of <code>"eu-central-1"</code> if not explicitly specified.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb113-1"><a href="exemplary-deployment.html#cb113-1" aria-hidden="true" tabindex="-1"></a>variable <span class="st">&quot;pem_key_name&quot;</span> {</span>
<span id="cb113-2"><a href="exemplary-deployment.html#cb113-2" aria-hidden="true" tabindex="-1"></a>  description <span class="op">=</span> <span class="st">&quot;Name of the pem key within AWS console&quot;</span></span>
<span id="cb113-3"><a href="exemplary-deployment.html#cb113-3" aria-hidden="true" tabindex="-1"></a>  type        <span class="op">=</span> string</span>
<span id="cb113-4"><a href="exemplary-deployment.html#cb113-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb113-5"><a href="exemplary-deployment.html#cb113-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-6"><a href="exemplary-deployment.html#cb113-6" aria-hidden="true" tabindex="-1"></a>variable <span class="st">&quot;region&quot;</span> {</span>
<span id="cb113-7"><a href="exemplary-deployment.html#cb113-7" aria-hidden="true" tabindex="-1"></a>  description <span class="op">=</span> <span class="st">&quot;AWS Region&quot;</span></span>
<span id="cb113-8"><a href="exemplary-deployment.html#cb113-8" aria-hidden="true" tabindex="-1"></a>  type        <span class="op">=</span> string</span>
<span id="cb113-9"><a href="exemplary-deployment.html#cb113-9" aria-hidden="true" tabindex="-1"></a>  <span class="im">default</span>     <span class="op">=</span> <span class="st">&quot;eu-central-1&quot;</span></span>
<span id="cb113-10"><a href="exemplary-deployment.html#cb113-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="vpc" class="section level3 hasAnchor" number="6.5.2">
<h3><span class="header-section-number">6.5.2</span> vpc<a href="exemplary-deployment.html#vpc" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>"vpc"</code> module is responsible for defining and configuring an Amazon Virtual Private Cloud (VPC) on AWS as part of the infrastructure provisioning process.</p>
<div id="main.tf-1" class="section level4 hasAnchor" number="6.5.2.1">
<h4><span class="header-section-number">6.5.2.1</span> main.tf<a href="exemplary-deployment.html#main.tf-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The provided Terraform code accomplishes two primary tasks. Firstly, it establishes a default Virtual Private Cloud (VPC) by defining an AWS resource of type <code>aws_default_vpc</code> named “default.” This action results in the creation of a default VPC within the AWS region corresponding to the Terraform configuration’s execution environment. Default VPCs are pre-configured VPCs automatically provided by AWS upon the creation of an AWS account.</p>
<p>Secondly, the code proceeds to create an AWS security group resource designated as “aws_security_group” with the name specified by the variable <code>var.security_group_name</code>. This security group is given the description “allow ssh on 22 &amp; http on port 80.” It is associated with the previously created default VPC (<code>aws_default_vpc.default.id</code>). The security group’s inbound rules permit incoming traffic on port 22 (SSH) and port 80 (HTTP) from any source IP address (<code>0.0.0.0/0</code>). Additionally, an egress rule with unrestricted outbound access is configured to allow all traffic (protocol “-1”) from the security group. This security group definition is instrumental in governing the network access policies for associated AWS resources, such as EC2 instances.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb114-1"><a href="exemplary-deployment.html#cb114-1" aria-hidden="true" tabindex="-1"></a># Default VPC</span>
<span id="cb114-2"><a href="exemplary-deployment.html#cb114-2" aria-hidden="true" tabindex="-1"></a>resource <span class="st">&quot;aws_default_vpc&quot;</span> <span class="st">&quot;default&quot;</span> {}</span>
<span id="cb114-3"><a href="exemplary-deployment.html#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="exemplary-deployment.html#cb114-4" aria-hidden="true" tabindex="-1"></a># Security group</span>
<span id="cb114-5"><a href="exemplary-deployment.html#cb114-5" aria-hidden="true" tabindex="-1"></a>resource <span class="st">&quot;aws_security_group&quot;</span> <span class="st">&quot;nginx_demo&quot;</span> {</span>
<span id="cb114-6"><a href="exemplary-deployment.html#cb114-6" aria-hidden="true" tabindex="-1"></a>  name        <span class="op">=</span> <span class="kw">var</span><span class="op">.</span><span class="at">security_group_name</span></span>
<span id="cb114-7"><a href="exemplary-deployment.html#cb114-7" aria-hidden="true" tabindex="-1"></a>  description <span class="op">=</span> <span class="st">&quot;allow ssh on 22 &amp; http on port 80&quot;</span></span>
<span id="cb114-8"><a href="exemplary-deployment.html#cb114-8" aria-hidden="true" tabindex="-1"></a>  vpc_id      <span class="op">=</span> aws_default_vpc<span class="op">.</span><span class="at">default</span><span class="op">.</span><span class="at">id</span></span>
<span id="cb114-9"><a href="exemplary-deployment.html#cb114-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-10"><a href="exemplary-deployment.html#cb114-10" aria-hidden="true" tabindex="-1"></a>  ingress {</span>
<span id="cb114-11"><a href="exemplary-deployment.html#cb114-11" aria-hidden="true" tabindex="-1"></a>    from_port   <span class="op">=</span> <span class="dv">22</span></span>
<span id="cb114-12"><a href="exemplary-deployment.html#cb114-12" aria-hidden="true" tabindex="-1"></a>    to_port     <span class="op">=</span> <span class="dv">22</span></span>
<span id="cb114-13"><a href="exemplary-deployment.html#cb114-13" aria-hidden="true" tabindex="-1"></a>    protocol    <span class="op">=</span> <span class="st">&quot;tcp&quot;</span></span>
<span id="cb114-14"><a href="exemplary-deployment.html#cb114-14" aria-hidden="true" tabindex="-1"></a>    cidr_blocks <span class="op">=</span> [<span class="st">&quot;0.0.0.0/0&quot;</span>]</span>
<span id="cb114-15"><a href="exemplary-deployment.html#cb114-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb114-16"><a href="exemplary-deployment.html#cb114-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-17"><a href="exemplary-deployment.html#cb114-17" aria-hidden="true" tabindex="-1"></a>  ingress {</span>
<span id="cb114-18"><a href="exemplary-deployment.html#cb114-18" aria-hidden="true" tabindex="-1"></a>    from_port   <span class="op">=</span> <span class="dv">80</span></span>
<span id="cb114-19"><a href="exemplary-deployment.html#cb114-19" aria-hidden="true" tabindex="-1"></a>    to_port     <span class="op">=</span> <span class="dv">80</span></span>
<span id="cb114-20"><a href="exemplary-deployment.html#cb114-20" aria-hidden="true" tabindex="-1"></a>    protocol    <span class="op">=</span> <span class="st">&quot;tcp&quot;</span></span>
<span id="cb114-21"><a href="exemplary-deployment.html#cb114-21" aria-hidden="true" tabindex="-1"></a>    cidr_blocks <span class="op">=</span> [<span class="st">&quot;0.0.0.0/0&quot;</span>]</span>
<span id="cb114-22"><a href="exemplary-deployment.html#cb114-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb114-23"><a href="exemplary-deployment.html#cb114-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-24"><a href="exemplary-deployment.html#cb114-24" aria-hidden="true" tabindex="-1"></a>  egress {</span>
<span id="cb114-25"><a href="exemplary-deployment.html#cb114-25" aria-hidden="true" tabindex="-1"></a>    from_port   <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb114-26"><a href="exemplary-deployment.html#cb114-26" aria-hidden="true" tabindex="-1"></a>    to_port     <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb114-27"><a href="exemplary-deployment.html#cb114-27" aria-hidden="true" tabindex="-1"></a>    protocol    <span class="op">=</span> <span class="st">&quot;-1&quot;</span></span>
<span id="cb114-28"><a href="exemplary-deployment.html#cb114-28" aria-hidden="true" tabindex="-1"></a>    cidr_blocks <span class="op">=</span> [<span class="st">&quot;0.0.0.0/0&quot;</span>]</span>
<span id="cb114-29"><a href="exemplary-deployment.html#cb114-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb114-30"><a href="exemplary-deployment.html#cb114-30" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="variables.tf-1" class="section level4 hasAnchor" number="6.5.2.2">
<h4><span class="header-section-number">6.5.2.2</span> variables.tf<a href="exemplary-deployment.html#variables.tf-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>variables.tf</code> defines only one variable names <code>"security_group_name"</code>. This variable serves as a parameter that allows to customize and provide a name to the custom security group when using the Terraform configuration.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb115-1"><a href="exemplary-deployment.html#cb115-1" aria-hidden="true" tabindex="-1"></a>variable <span class="st">&quot;security_group_name&quot;</span> {</span>
<span id="cb115-2"><a href="exemplary-deployment.html#cb115-2" aria-hidden="true" tabindex="-1"></a>  type        <span class="op">=</span> string</span>
<span id="cb115-3"><a href="exemplary-deployment.html#cb115-3" aria-hidden="true" tabindex="-1"></a>  description <span class="op">=</span> <span class="st">&quot;Name of the security group&quot;</span></span>
<span id="cb115-4"><a href="exemplary-deployment.html#cb115-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="outputs.tf-1" class="section level4 hasAnchor" number="6.5.2.3">
<h4><span class="header-section-number">6.5.2.3</span> outputs.tf<a href="exemplary-deployment.html#outputs.tf-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The provided <code>outputs.tf</code> defines an output named <code>"aws\_security\_group_id"</code> which captures and makes available the value of the created <code>id</code> attribute of the AWS security group resource with the identifier <code>"nginx_demo"</code>, we created earlier.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb116-1"><a href="exemplary-deployment.html#cb116-1" aria-hidden="true" tabindex="-1"></a>output <span class="st">&quot;aws_security_group_id&quot;</span> {</span>
<span id="cb116-2"><a href="exemplary-deployment.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  value <span class="op">=</span> aws_security_group<span class="op">.</span><span class="at">nginx_demo</span><span class="op">.</span><span class="at">id</span></span>
<span id="cb116-3"><a href="exemplary-deployment.html#cb116-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="run-the-code" class="section level3 hasAnchor" number="6.5.3">
<h3><span class="header-section-number">6.5.3</span> Run the code<a href="exemplary-deployment.html#run-the-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As outlined in the section <a href="basic-usage.html#basic-usage">Basic usage</a>, you can execute the Terraform code by following a sequence of Terraform CLI commands. Here’s a step-by-step guide to working with the code:</p>
<p><strong>Initialize Terraform</strong> (if you haven’t already done so) and downloads the necessary providers and modules.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb117-1"><a href="exemplary-deployment.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="ex">terraform</span> init</span></code></pre></div>
<p><strong>Validate the Configuration</strong> to check the syntax and validity of your Terraform configuration files.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb118-1"><a href="exemplary-deployment.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="ex">terraform</span> validate</span></code></pre></div>
<p><strong>Plan the Infrastructure</strong> and create an execution plan, displaying the changes that Terraform will make to your infrastructure. Review the plan to ensure everything is correct.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb119-1"><a href="exemplary-deployment.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="ex">terraform</span> plan</span></code></pre></div>
<p><strong>Apply the Configuration</strong> and confirm the changes by entering “yes” when prompted.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb120-1"><a href="exemplary-deployment.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="ex">terraform</span> apply</span></code></pre></div>
<p><strong>Testing NGINX Deployment</strong>
After the <code>terraform apply</code> command successfully completes, you can access the NGINX deployment using the public DNS defined as an output in your Terraform script. Open the URL provided in a web browser to verify the NGINX server’s availability.</p>
<p><strong>Destroy Resources</strong> (After Testing) to clean up and remove all the resources created by Terraform.
<code>bash    terraform destroy</code></p>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="additional-tips-tricks.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ml-platform-design.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/seblum/kubernetes-training/edit/master/06.5-Terraform-Exemplary_deployment.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
